<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ì˜ ë¯¸ë˜ ì„¤ê³„ ì‹œë®¬ë ˆì´í„°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .grammar-highlight {
            color: #1d4ed8; /* Deeper blue color */
            font-weight: 700;
        }
        .choice-button {
            transition: all 0.2s ease-in-out;
            border: 2px solid transparent;
        }
        .choice-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
            border-color: #38bdf8;
        }
        .progress-bar-fill {
            transition: width 0.5s ease-in-out;
        }
        /* Modal styles */
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.6);
        }
    </style>
</head>
<body class="bg-sky-100 flex items-center justify-center min-h-screen p-4">

    <div id="game-container" class="bg-white rounded-2xl shadow-2xl p-4 sm:p-6 md:p-8 max-w-2xl w-full mx-auto">
        
        <h1 class="text-2xl md:text-3xl font-bold text-center text-slate-800 mb-2">ë‚˜ì˜ ë¯¸ë˜ ì„¤ê³„ ì‹œë®¬ë ˆì´í„° ğŸš€</h1>
        <p class="text-center text-slate-500 mb-6">ë‹¹ì‹ ì˜ ì„ íƒì´ ë¯¸ë˜ë¥¼ ë§Œë“­ë‹ˆë‹¤!</p>

        <div id="stats-container" class="grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4 mb-6 text-sm">
            <!-- Stats will be dynamically inserted here -->
        </div>

        <div class="bg-slate-50 rounded-lg p-4 sm:p-6 mb-6 min-h-[150px] flex flex-col justify-center">
            <div class="flex items-center gap-4">
                <img id="avatar" src="https://placehold.co/80x80/a7f3d0/333333?text=ğŸ˜Š" alt="Avatar" class="rounded-full w-16 h-16 md:w-20 md:h-20 flex-shrink-0">
                <div>
                    <h2 id="story-title" class="font-bold text-lg text-slate-800 mb-1">ì‚¬íšŒì´ˆë…„ìƒ</h2>
                    <p id="story-text" class="text-slate-600">ê²Œì„ì´ ê³§ ì‹œì‘ë©ë‹ˆë‹¤...</p>
                </div>
            </div>
        </div>
        
        <div id="choices-container" class="grid grid-cols-1 gap-4">
            <!-- Choices will be dynamically inserted here -->
        </div>
    </div>

    <!-- Modal for Game Over and Endings -->
    <div id="modal-container" class="hidden fixed inset-0 modal-backdrop flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 max-w-md w-full mx-auto text-center">
            <img id="modal-image" src="" class="w-24 h-24 mx-auto mb-4 rounded-full" alt="Result Image">
            <h2 id="modal-title" class="text-2xl font-bold text-slate-800 mb-2"></h2>
            <p id="modal-text" class="text-slate-600 mb-6"></p>
            <div id="modal-stats-container" class="mb-6"></div>
            <button id="restart-button" class="w-full bg-sky-500 text-white p-3 rounded-lg font-bold hover:bg-sky-600">ìƒˆë¡œìš´ ì¸ìƒ ì‹œì‘í•˜ê¸°</button>
        </div>
    </div>

<script>
    const stats = {
        happiness: { name: 'ğŸ˜Š í–‰ë³µ', value: 50, color: 'bg-yellow-400' },
        health: { name: 'â¤ï¸ ê±´ê°•', value: 70, color: 'bg-red-500' },
        money: { name: 'ğŸ’° ì¬ì‚°', value: 10, color: 'bg-green-500' },
        career: { name: 'ğŸ‘” ê²½ë ¥', value: 0, color: 'bg-blue-500' }
    };

    const events = {
        start: {
            title: "ì²« íšŒì‚¬, ì²« ë‹¤ì§",
            story: "ì²« íšŒì‚¬ì— ë“¤ì–´ì™”ì–´ìš”. ì–´ë–»ê²Œ ì¼í•˜ê³  ì‹¶ì–´ìš”?",
            avatar: "https://placehold.co/80x80/a7f3d0/333333?text=ğŸ¤”",
            choices: [
                { text: "ì„±ê³µí•˜ê³  ì‹¶ì–´ìš”. ì•¼ê·¼ë„ ì—´ì‹¬íˆ <span class='grammar-highlight'>í•  ì˜ˆì •ì´ì—ìš”</span>.", effect: { career: 15, money: 5, health: -15, happiness: -5 }, next: 'first_salary' },
                { text: "ì‰¬ëŠ” ê²ƒë„ ì¤‘ìš”í•´ìš”. ì¼ê³¼ íœ´ì‹ì˜ ê· í˜•ì„ <span class='grammar-highlight'>ì°¾ì„ ìƒê°ì´ì—ìš”</span>.", effect: { happiness: 10, health: 5, career: 5 }, next: 'first_salary' }
            ]
        },
        first_salary: {
            title: "ì²« ì›”ê¸‰ì„ ë°›ì•˜ì–´ìš”!",
            story: "ì²« ì›”ê¸‰ìœ¼ë¡œ ë¬´ì—‡ì„ í•˜ê³  ì‹¶ì–´ìš”?",
            avatar: "https://placehold.co/80x80/fef08a/333333?text=ğŸ‰",
            choices: [
                { text: "ë¯¸ë˜ë¥¼ ìœ„í•´ ëˆì„ <span class='grammar-highlight'>ì €ì¶•í•  ê³„íšì´ì—ìš”</span>.", effect: { money: 15, happiness: 5 }, next: 'burnout' },
                { text: "ë‚˜ë¥¼ ìœ„í•´ ì„ ë¬¼ì„ <span class='grammar-highlight'>ì‚´ ìƒê°ì´ì—ìš”</span>.", effect: { happiness: 15, money: -5 }, next: 'burnout' }
            ]
        },
        burnout: {
            title: "ë„ˆë¬´ í”¼ê³¤í•´ìš”",
            story: "ì¼ì´ ë„ˆë¬´ ë§ì•„ì„œ í˜ë“¤ì–´ìš”. ì–´ë–»ê²Œ í• ê¹Œìš”?",
            avatar: "https://placehold.co/80x80/e9d5ff/333333?text=ğŸ˜µ",
            choices: [
                { text: "ê±´ê°•ì„ ìœ„í•´ ìš´ë™ì„ <span class='grammar-highlight'>ì‹œì‘í•  ê³„íšì´ì—ìš”</span>.", effect: { health: 20, money: -5, happiness: 5 }, next: 'opportunity' },
                { text: "ì¬ë¯¸ìˆëŠ” ì·¨ë¯¸ë¥¼ <span class='grammar-highlight'>ì°¾ì•„ë³¼ ìƒê°ì´ì—ìš”</span>.", effect: { happiness: 20, health: 5, money: -5 }, next: 'opportunity' }
            ]
        },
        opportunity: {
            title: "ë” ì¢‹ì€ íšŒì‚¬",
            story: "ë‹¤ë¥¸ íšŒì‚¬ì—ì„œ ì˜¤ë¼ê³  ì—°ë½ì´ ì™”ì–´ìš”. ì–´ë–»ê²Œ í• ê¹Œìš”?",
            avatar: "https://placehold.co/80x80/6ee7b7/333333?text=ğŸ’¼",
            choices: [
                { text: "ìƒˆë¡œìš´ ê³³ì—ì„œ <span class='grammar-highlight'>ë„ì „í•  ìƒê°ì´ì—ìš”</span>.", effect: { career: 20, money: 10, happiness: -5 }, next: 'investment' },
                { text: "ì§€ê¸ˆ íšŒì‚¬ì—ì„œ ê³„ì† <span class='grammar-highlight'>ì¼í•  ê³„íšì´ì—ìš”</span>.", effect: { happiness: 10, career: 10 }, next: 'investment' }
            ]
        },
        investment: {
            title: "ëˆì„ ëª¨ì•˜ì–´ìš”",
            story: "ì¡°ê¸ˆ ëª¨ì€ ëˆì´ ìˆì–´ìš”. ì´ ëˆì„ ì–´ë–»ê²Œ í• ê¹Œìš”?",
            avatar: "https://placehold.co/80x80/bae6fd/333333?text=ğŸ“ˆ",
            choices: [
                { text: "ì•ˆì „í•˜ê²Œ ì€í–‰ì— <span class='grammar-highlight'>ì €ì¶•í•  ì˜ˆì •ì´ì—ìš”</span>.", effect: { money: 20, happiness: 5 }, next: 'mid_life' },
                { text: "ì¹œêµ¬ì™€ ê°€ê²Œë¥¼ <span class='grammar-highlight'>ì—´ ìƒê°ì´ì—ìš”</span>.", effect: { career: 25, happiness: 10, money: -15 }, next: 'mid_life' }
            ]
        },
        mid_life: {
            title: "10ë…„ í›„",
            story: "íšŒì‚¬ì—ì„œ ì¼í•œ ì§€ 10ë…„ì´ ë˜ì—ˆì–´ìš”. ì•ìœ¼ë¡œ ë¬´ì—‡ì„ í•˜ê³  ì‹¶ì–´ìš”?",
            avatar: "https://placehold.co/80x80/f9a8d4/333333?text=âœ¨",
            choices: [
                { text: "ë” ê³µë¶€í•˜ê¸° ìœ„í•´ ëŒ€í•™ì›ì— <span class='grammar-highlight'>ê°ˆ ì˜ˆì •ì´ì—ìš”</span>.", effect: { career: 30, money: -20, health: -10 }, next: 'final_choice' },
                { text: "ì—´ì‹¬íˆ ì¼í–ˆì–´ìš”. 1ë…„ ë™ì•ˆ <span class='grammar-highlight'>ì‰´ ìƒê°ì´ì—ìš”</span>.", effect: { happiness: 30, health: 15, career: -10, money: -10 }, next: 'final_choice' }
            ]
        },
        final_choice: {
            title: "ë‚˜ì˜ ê¿ˆ",
            story: "ì´ì œ ì •ë§ ì¤‘ìš”í•œ ì‹œê°„ì´ì—ìš”. ë‹¹ì‹ ì˜ ìµœì¢… ëª©í‘œëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
            avatar: "https://placehold.co/80x80/fde047/333333?text=ğŸ†",
            choices: [
                { text: "ë¶€ìê°€ ë˜ëŠ” ì‚¶ì„ <span class='grammar-highlight'>ì‚´ ê³„íšì´ì—ìš”</span>.", next: 'end', effect: { money: 30 } },
                { text: "í–‰ë³µí•˜ê²Œ ì‚¬ëŠ” ì‚¶ì„ <span class='grammar-highlight'>ë§Œë“¤ ìƒê°ì´ì—ìš”</span>.", next: 'end', effect: { happiness: 30 } }
            ]
        },
        gameOver_health: {
            title: "GAME OVER",
            story: "ê±´ê°•ì„ ìƒìœ¼ë©´ ëª¨ë“  ê²ƒì„ ìƒì–´ìš”. ë‹¤ìŒì—” ê±´ê°•ì„ ê¼­ ì±™ê¸°ì„¸ìš”!",
            avatar: "https://placehold.co/80x80/fca5a5/333333?text=ğŸ¤’",
        },
        gameOver_money: {
            title: "GAME OVER",
            story: "ëˆì´ ì—†ìœ¼ë©´ ì‚´ê¸° í˜ë“¤ì–´ìš”. ë‹¤ìŒì—” ê³„íšì ìœ¼ë¡œ ëˆì„ ì“°ì„¸ìš”!",
            avatar: "https://placehold.co/80x80/d1d5db/333333?text=ğŸ’¸",
        },
        gameOver_happiness: {
            title: "GAME OVER",
            story: "í–‰ë³µí•˜ì§€ ì•Šìœ¼ë©´ ì˜ë¯¸ê°€ ì—†ì–´ìš”. ë‹¹ì‹ ì˜ í–‰ë³µì„ ë¨¼ì € ìƒê°í•˜ì„¸ìš”!",
            avatar: "https://placehold.co/80x80/a5f3fc/333333?text=ğŸ˜­",
        },
        gameOver_career: {
            title: "GAME OVER",
            story: "ì§ì—…ì´ ì—†ìœ¼ë©´ ë¶ˆì•ˆí•´ìš”. ë‹¹ì‹ ì˜ ëŠ¥ë ¥ì„ ë” ë°œì „ì‹œì¼œ ë³´ì„¸ìš”!",
            avatar: "https://placehold.co/80x80/facc15/333333?text=ğŸ“‰",
        },
        end: {} // This is a special trigger for the ending screen
    };

    const DOM = {
        gameContainer: document.getElementById('game-container'),
        statsContainer: document.getElementById('stats-container'),
        storyTitle: document.getElementById('story-title'),
        storyText: document.getElementById('story-text'),
        choicesContainer: document.getElementById('choices-container'),
        avatar: document.getElementById('avatar'),
        modal: {
            container: document.getElementById('modal-container'),
            image: document.getElementById('modal-image'),
            title: document.getElementById('modal-title'),
            text: document.getElementById('modal-text'),
            statsContainer: document.getElementById('modal-stats-container'),
            restartButton: document.getElementById('restart-button')
        }
    };

    function updateStatsUI() {
        DOM.statsContainer.innerHTML = '';
        for (const key in stats) {
            const stat = stats[key];
            const statElement = document.createElement('div');
            statElement.className = "bg-slate-100 p-2 sm:p-3 rounded-lg";
            statElement.innerHTML = `
                <div class="flex justify-between mb-1 items-center">
                    <span class="font-semibold text-slate-600 text-xs sm:text-sm">${stat.name}</span>
                    <span class="font-bold text-slate-800">${stat.value}/100</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div class="h-2.5 rounded-full progress-bar-fill ${stat.color}" style="width: ${stat.value}%"></div>
                </div>`;
            DOM.statsContainer.appendChild(statElement);
        }
    }

    function showEvent(eventId) {
        if (eventId === 'end') {
            showEndingScreen();
            return;
        }

        const event = events[eventId];
        DOM.storyTitle.textContent = event.title;
        DOM.storyText.textContent = event.story;
        DOM.avatar.src = event.avatar;
        DOM.choicesContainer.innerHTML = '';

        if (event.choices) {
            event.choices.forEach(choice => {
                const button = document.createElement('button');
                button.className = "choice-button w-full bg-sky-500 text-white p-3 sm:p-4 rounded-lg font-bold hover:bg-sky-600 text-left";
                button.innerHTML = choice.text;
                button.onclick = () => selectChoice(choice);
                DOM.choicesContainer.appendChild(button);
            });
        }
        updateStatsUI();
    }
    
    function checkGameOver() {
        for (const key in stats) {
            if (stats[key].value <= 0) {
                const gameOverEvent = events[`gameOver_${key}`];
                DOM.modal.image.src = gameOverEvent.avatar;
                DOM.modal.title.textContent = gameOverEvent.title;
                DOM.modal.text.textContent = gameOverEvent.story;
                DOM.modal.statsContainer.innerHTML = ''; // No stats on game over
                DOM.modal.container.classList.remove('hidden');
                return true;
            }
        }
        return false;
    }

    function showEndingScreen() {
        let highestStat = { key: 'happiness', value: -1 };
        for (const key in stats) {
            if (stats[key].value > highestStat.value) {
                highestStat = { key, value: stats[key].value };
            }
        }

        let endingMessage = "";
        let endingAvatar = "";
        switch(highestStat.key) {
            case 'happiness':
                endingMessage = "ë‹¹ì‹ ì€ í–‰ë³µì„ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ”êµ°ìš”! ì›ƒìŒì´ ê°€ë“í•œ ë©‹ì§„ ì¸ìƒì´ì—ˆì–´ìš”.";
                endingAvatar = "https://placehold.co/80x80/fde047/333333?text=ğŸ˜„";
                break;
            case 'health':
                endingMessage = "ê±´ê°•ì´ ìµœê³ ì£ ! ë‹¹ì‹ ì€ íŠ¼íŠ¼í•˜ê³  í™œê¸°ì°¬ ì¸ìƒì„ ì‚´ì•˜ì–´ìš”.";
                endingAvatar = "https://placehold.co/80x80/86efac/333333?text=ğŸ’ª";
                break;
            case 'money':
                endingMessage = "ë‹¹ì‹ ì€ ë¶€ìê°€ ë˜ì—ˆì–´ìš”! ê²½ì œì  ììœ ë¥¼ ì–»ì—ˆë„¤ìš”.";
                endingAvatar = "https://placehold.co/80x80/22d3ee/333333?text=ğŸ˜";
                break;
            case 'career':
                 endingMessage = "ë‹¹ì‹ ì€ ìê¸° ë¶„ì•¼ì—ì„œ ìµœê³ ê°€ ë˜ì—ˆì–´ìš”! ëª¨ë‘ê°€ ë‹¹ì‹ ì„ ì¡´ê²½í•´ìš”.";
                 endingAvatar = "https://placehold.co/80x80/c084fc/333333?text=ğŸ‘‘";
                 break;
        }

        DOM.modal.image.src = endingAvatar;
        DOM.modal.title.textContent = "ë‚˜ì˜ ì¸ìƒ ê²°ê³¼";
        DOM.modal.text.textContent = endingMessage;
        DOM.modal.statsContainer.innerHTML = DOM.statsContainer.innerHTML; // Show final stats
        DOM.modal.container.classList.remove('hidden');
    }

    function selectChoice(choice) {
        if (choice.effect) {
            for (const key in choice.effect) {
                stats[key].value += choice.effect[key];
                if (stats[key].value > 100) stats[key].value = 100;
                if (stats[key].value < 0) stats[key].value = 0;
            }
        }
        
        updateStatsUI();
        if (!checkGameOver()) {
            showEvent(choice.next);
        }
    }

    function restartGame() {
        stats.happiness.value = 50;
        stats.health.value = 70;
        stats.money.value = 10;
        stats.career.value = 0;
        DOM.modal.container.classList.add('hidden');
        showEvent('start');
    }
    
    DOM.modal.restartButton.onclick = restartGame;
    
    window.onload = () => {
        showEvent('start');
    };
</script>

</body>
</html>

