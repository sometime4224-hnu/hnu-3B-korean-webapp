<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>한국어 문법 학습: V-고 있다</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f3f4f6;
        }
        .card {
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        @media (min-width: 640px) {
            .card {
                padding: 2rem;
                margin-bottom: 2rem;
            }
        }
        .gradient-text {
            background: linear-gradient(to right, #10b981, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .btn {
            border-radius: 10px;
            padding: 0.75rem 1.5rem;
            font-weight: 700;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 14px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background-color: #10b981;
        }
        .btn-primary:hover {
            background-color: #059669;
        }
        .tab-btn {
            padding: 0.75rem 1.25rem;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }
        .tab-btn.active {
            color: #059669;
            background-color: #d1fae5;
            border-color: #10b981;
        }
        .tab-btn:not(.active) {
            color: #4b5563;
        }
        .quiz-input {
            border: 2px solid #d1d5db;
            border-radius: 10px;
            padding: 0.75rem 1rem;
            width: 100%;
            transition: border-color 0.2s;
        }
        .quiz-input:focus {
            outline: none;
            border-color: #10b981;
        }
        .feedback {
            font-weight: 700;
            margin-top: 1rem;
            padding: 0.75rem;
            border-radius: 8px;
            text-align: center;
        }
        .feedback-correct {
            color: #16a34a;
            background-color: #dcfce7;
        }
        .feedback-incorrect {
            color: #dc2626;
            background-color: #fee2e2;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body class="p-4 sm:p-6 lg:p-8">
    <div class="max-w-4xl mx-auto">
        
        <header class="text-center mb-6">
            <h1 class="text-3xl sm:text-4xl font-bold gradient-text" data-key="main_title">문법과 표현 2: V-고 있다</h1>
            <p class="text-gray-600 mt-2" data-key="main_subtitle">Grammar and Expression 2: V-고 있다</p>
            <div class="mt-4">
                <select id="lang-selector" class="rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 text-base py-2 px-3">
                    <option value="ko">한국어</option>
                    <option value="en">English</option>
                    <option value="vi">Tiếng Việt</option>
                    <option value="ja">日本語</option>
                    <option value="zh">中文</option>
                </select>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="flex justify-center flex-wrap space-x-2 sm:space-x-4 mb-6 bg-gray-100 p-2 rounded-xl">
            <button class="tab-btn active" onclick="changeView('explanation')" data-key="tab_explanation">설명</button>
            <button class="tab-btn" onclick="changeView('practice')" data-key="tab_practice">연습</button>
            <button class="tab-btn" onclick="changeView('quiz')" data-key="tab_quiz">연습 문제</button>
        </div>

        <!-- Content Views -->
        <main>
            <!-- Explanation View -->
            <div id="explanation-view">
                <div class="card">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4" data-key="explanation_title">무엇을 배울까요?</h2>
                    <p class="text-gray-700 mb-2" data-key="explanation_desc_1">
                        <strong>-고 있다</strong>는 현재 진행 중인 동작이나, 옷 등을 입거나 착용한 상태가 계속됨을 나타낼 때 사용하는 표현입니다.
                    </p>
                     <p class="text-gray-700" data-key="explanation_desc_2">
                        '~하는 중이다' 또는 '~한 상태이다'라는 의미를 가집니다.
                    </p>
                    <div class="mt-6 pt-6 border-t">
                        <h3 class="font-bold text-lg text-gray-800 mb-2" data-key="conjugation_title">만드는 법</h3>
                        <ul class="list-disc list-inside text-gray-700 space-y-2">
                            <li data-key="conjugation_rule_1">동사 어간에 바로 + <strong>고 있다</strong>를 붙입니다. (예: 가다 → 가고 있다, 입다 → 입고 있다)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Practice View -->
            <div id="practice-view" class="hidden">
                 <div class="card">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4" data-key="dialogue_title">대화 예시</h2>
                    <div class="space-y-4">
                        <div class="flex items-start space-x-3">
                            <div class="flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center font-bold text-lg">A</div>
                            <div class="bg-gray-100 rounded-xl p-3 sm:p-4">
                                <p class="text-gray-800" data-key="dialogue_a_1">아키라 씨가 누구예요?</p>
                                <p class="text-sm text-gray-500" data-key="dialogue_a_2">Who is Akira?</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold text-lg">B</div>
                            <div class="bg-gray-100 rounded-xl p-3 sm:p-4">
                                <p class="text-gray-800" data-key="dialogue_b_1">저기 흰색 양복에 까만색 가방을 <strong>들고 있는</strong> 사람이에요.</p>
                                <p class="text-sm text-gray-500" data-key="dialogue_b_2">That person over there wearing a white suit and holding a black bag.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4" data-key="examples_title">문장 예시</h2>
                    <ul class="space-y-4">
                        <li>
                            <p class="text-gray-800">지금 <strong>입고 있는</strong> 청바지 아주 편해 보이는데 어디서 샀어요?</p>
                        </li>
                        <li>
                            <p class="text-gray-800">흰색 와이셔츠에 빨간색 넥타이를 <strong>메고 있는</strong> 사람이 우리 형이에요.</p>
                        </li>
                        <li>
                            <p class="text-gray-800">사오랑 씨는 파란색 체크무늬 셔츠에 청바지를 <strong>입고 있어요</strong>.</p>
                        </li>
                         <li>
                            <p class="text-gray-800">마리코 씨는 노란색 원피스에 하얀색 구두를 <strong>신고 있어요</strong>.</p>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Quiz View -->
            <div id="quiz-view" class="hidden">
                <div class="card">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2" data-key="quiz_title">연습 문제</h2>
                    <p class="text-gray-600 mb-6" data-key="quiz_instruction">괄호 안의 단어를 사용하여 문장을 완성하세요. ('-고 있어요' 형태로)</p>
                    <div id="quiz-container"></div>
                    <div class="mt-6 flex justify-between items-center">
                        <button id="check-btn" class="btn btn-primary" data-key="check_button">정답 확인</button>
                        <button id="next-btn" class="btn bg-gray-600 hover:bg-gray-700 hidden" data-key="next_button">다음 문제</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const translations = {
            ko: {
                main_title: "문법과 표현 2: V-고 있다",
                main_subtitle: "Grammar and Expression 2: V-고 있다",
                tab_explanation: "설명",
                tab_practice: "연습",
                tab_quiz: "연습 문제",
                explanation_title: "무엇을 배울까요?",
                explanation_desc_1: "<strong>-고 있다</strong>는 현재 진행 중인 동작이나, 옷 등을 입거나 착용한 상태가 계속됨을 나타낼 때 사용하는 표현입니다.",
                explanation_desc_2: "'~하는 중이다' 또는 '~한 상태이다'라는 의미를 가집니다.",
                conjugation_title: "만드는 법",
                conjugation_rule_1: "동사 어간에 바로 + <strong>고 있다</strong>를 붙입니다. (예: 가다 → 가고 있다, 입다 → 입고 있다)",
                dialogue_title: "대화 예시",
                dialogue_a_1: "아키라 씨가 누구예요?",
                dialogue_a_2: "Who is Akira?",
                dialogue_b_1: "저기 흰색 양복에 까만색 가방을 <strong>들고 있는</strong> 사람이에요.",
                dialogue_b_2: "That person over there wearing a white suit and holding a black bag.",
                examples_title: "문장 예시",
                quiz_title: "연습 문제",
                quiz_instruction: "괄호 안의 단어를 사용하여 문장을 완성하세요. ('-고 있어요' 형태로)",
                check_button: "정답 확인",
                next_button: "다음 문제",
                feedback_correct: "정답입니다!",
                feedback_incorrect_template: (answer) => `틀렸어요. 정답은 "${answer}" 입니다.`,
                quiz_end: "모든 문제를 다 풀었어요! 정말 잘했어요! 👏"
            },
            en: {
                main_title: "Grammar and Expression 2: V-고 있다",
                main_subtitle: "",
                tab_explanation: "Explanation",
                tab_practice: "Practice",
                tab_quiz: "Quiz",
                explanation_title: "What will we learn?",
                explanation_desc_1: "<strong>-고 있다</strong> is used to express an action in progress, or a continuous state of wearing something (like clothes).",
                explanation_desc_2: "It means 'is/are -ing' or 'is in the state of wearing'.",
                conjugation_title: "Conjugation",
                conjugation_rule_1: "Simply add + <strong>고 있다</strong> to the verb stem. (e.g., 가다 → 가고 있다, 입다 → 입고 있다)",
                dialogue_title: "Dialogue Example",
                dialogue_a_1: "Who is Akira?",
                dialogue_a_2: "",
                dialogue_b_1: "That person over there <strong>wearing</strong> a white suit and <strong>holding</strong> a black bag.",
                dialogue_b_2: "",
                examples_title: "Example Sentences",
                quiz_title: "Practice Quiz",
                quiz_instruction: "Complete the sentence using the word in parentheses. (in the '-고 있어요' form)",
                check_button: "Check Answer",
                next_button: "Next Question",
                feedback_correct: "Correct!",
                feedback_incorrect_template: (answer) => `Incorrect. The answer is "${answer}".`,
                quiz_end: "You've completed all the questions! Great job! 👏"
            },
            vi: {
                main_title: "Ngữ pháp và biểu hiện 2: V-고 있다",
                main_subtitle: "",
                tab_explanation: "Giải thích",
                tab_practice: "Luyện tập",
                tab_quiz: "Câu đố",
                explanation_title: "Chúng ta sẽ học gì?",
                explanation_desc_1: "<strong>-고 있다</strong> là biểu hiện dùng để chỉ hành động đang diễn ra, hoặc trạng thái đang mặc (quần áo, v.v.).",
                explanation_desc_2: "Nó có nghĩa là 'đang làm gì đó' hoặc 'đang trong trạng thái'.",
                conjugation_title: "Cách chia",
                conjugation_rule_1: "Chỉ cần thêm + <strong>고 있다</strong> vào sau gốc động từ. (ví dụ: 가다 → 가고 있다, 입다 → 입고 있다)",
                dialogue_title: "Ví dụ hội thoại",
                dialogue_a_1: "Akira là ai vậy?",
                dialogue_a_2: "",
                dialogue_b_1: "Là người <strong>đang mặc</strong> vest trắng và <strong>xách</strong> túi màu đen ở đằng kia.",
                dialogue_b_2: "",
                examples_title: "Ví dụ câu",
                quiz_title: "Câu đố thực hành",
                quiz_instruction: "Hoàn thành câu bằng từ trong ngoặc. (dạng '-고 있어요')",
                check_button: "Kiểm tra đáp án",
                next_button: "Câu tiếp theo",
                feedback_correct: "Đúng rồi!",
                feedback_incorrect_template: (answer) => `Sai rồi. Đáp án là "${answer}".`,
                quiz_end: "Bạn đã hoàn thành tất cả các câu hỏi! Làm tốt lắm! 👏"
            },
            ja: {
                main_title: "文法と表現 2: V-고 있다",
                main_subtitle: "",
                tab_explanation: "説明",
                tab_practice: "練習",
                tab_quiz: "練習問題",
                explanation_title: "何を学びますか？",
                explanation_desc_1: "<strong>-고 있다</strong>は、現在進行中の動作や、服などを着たり着用した状態が続いていることを表すときに使う表現です。",
                explanation_desc_2: "「〜している」または「〜している状態だ」という意味です。",
                conjugation_title: "作り方",
                conjugation_rule_1: "動詞の語幹にそのまま + <strong>고 있다</strong>を付けます。(例: 가다 → 가고 있다, 입다 → 입고 있다)",
                dialogue_title: "会話の例",
                dialogue_a_1: "あきらさんは誰ですか？",
                dialogue_a_2: "",
                dialogue_b_1: "あそこの白いスーツに黒いカバンを<strong>持っている</strong>人です。",
                dialogue_b_2: "",
                examples_title: "例文",
                quiz_title: "練習問題",
                quiz_instruction: "括弧内の単語を使って文章を完成させてください。(「-고 있어요」の形で)",
                check_button: "正解確認",
                next_button: "次の問題",
                feedback_correct: "正解です！",
                feedback_incorrect_template: (answer) => `不正解です。正解は「${answer}」です。`,
                quiz_end: "すべての問題を完了しました！お疲れ様でした！👏"
            },
            zh: {
                main_title: "语法与表达 2: V-고 있다",
                main_subtitle: "",
                tab_explanation: "说明",
                tab_practice: "练习",
                tab_quiz: "练习题",
                explanation_title: "我们将学习什么？",
                explanation_desc_1: "<strong>-고 있다</strong> 用于表示正在进行的动作，或穿着衣物等持续的状态。",
                explanation_desc_2: "意思是“正在做...”或“处于...的状态”。",
                conjugation_title: "构成方法",
                conjugation_rule_1: "在动词词干后直接加 + <strong>고 있다</strong>。(例如: 가다 → 가고 있다, 입다 → 입고 있다)",
                dialogue_title: "对话示例",
                dialogue_a_1: "Akira是谁？",
                dialogue_a_2: "",
                dialogue_b_1: "就是那个穿着白色西装，<strong>提着</strong>黑色包的人。",
                dialogue_b_2: "",
                examples_title: "例句",
                quiz_title: "练习题",
                quiz_instruction: "请使用括号中的单词完成句子。(使用'-고 있어요'形式)",
                check_button: "确认答案",
                next_button: "下一题",
                feedback_correct: "回答正确！",
                feedback_incorrect_template: (answer) => `回答错误。正确答案是“${answer}”。`,
                quiz_end: "你已经完成了所有问题！做得好！👏"
            }
        };

        const quizData = [
            { type: "동사", base: "보다", sentence: "수진 씨가 텔레비전을 (보다).", answer: "보고 있어요" },
            { type: "동사", base: "듣다", sentence: "학생들이 음악을 (듣다).", answer: "듣고 있어요" },
            { type: "동사", base: "만들다", sentence: "어머니께서 김밥을 (만들다).", answer: "만들고 있어요" },
            { type: "동사", base: "읽다", sentence: "아버지가 신문을 (읽다).", answer: "읽고 있어요" },
            { type: "동사", base: "자다", sentence: "아기가 침대에서 (자다).", answer: "자고 있어요" },
            { type: "동사", base: "쓰다", sentence: "저는 지금 모자를 (쓰다).", answer: "쓰고 있어요" },
        ];

        let currentQuestionIndex = 0;
        let currentLang = 'ko';

        const quizContainer = document.getElementById('quiz-container');
        const checkBtn = document.getElementById('check-btn');
        const nextBtn = document.getElementById('next-btn');
        const langSelector = document.getElementById('lang-selector');

        function changeView(viewId) {
            document.querySelectorAll('main > div').forEach(view => view.classList.add('hidden'));
            document.getElementById(`${viewId}-view`).classList.remove('hidden');

            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[onclick="changeView('${viewId}')"]`).classList.add('active');
            
            if (viewId === 'quiz') {
                currentQuestionIndex = 0;
                loadQuestion();
            }
        }

        function changeLanguage() {
            currentLang = langSelector.value;
            const langData = translations[currentLang];
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.dataset.key;
                if (langData[key]) {
                    el.innerHTML = langData[key];
                }
            });
             if (document.getElementById('quiz-view').style.display !== 'none') {
                const currentQuestion = quizData[currentQuestionIndex];
                const feedbackContainer = document.getElementById('feedback-container');
                if (feedbackContainer.classList.contains('feedback-incorrect')) {
                     feedbackContainer.innerHTML = langData.feedback_incorrect_template(currentQuestion.answer);
                } else if(feedbackContainer.classList.contains('feedback-correct')) {
                    feedbackContainer.textContent = langData.feedback_correct;
                }
            }
        }
        
        function loadQuestion() {
            const currentQuestion = quizData[currentQuestionIndex];
            quizContainer.innerHTML = `
                <p class="text-sm font-bold text-emerald-600 mb-2">${currentQuestion.type}</p>
                <p class="text-lg text-gray-800 mb-3">${currentQuestionIndex + 1}. ${currentQuestion.sentence}</p>
                <div class="flex items-center space-x-2">
                    <input type="text" id="user-answer" class="quiz-input flex-grow" placeholder="...">
                </div>
                <div id="feedback-container" class="feedback"></div>
            `;
            const input = document.getElementById('user-answer');
            input.addEventListener('keydown', (e) => {
                if(e.key === 'Enter') checkAnswer();
            });
            input.focus();
            hideFeedback();
            nextBtn.classList.add('hidden');
            checkBtn.classList.remove('hidden');
        }
        
        function hideFeedback() {
             const feedbackContainer = document.getElementById('feedback-container');
             feedbackContainer.textContent = '';
             feedbackContainer.className = 'feedback';
        }

        function checkAnswer() {
            const userAnswer = document.getElementById('user-answer').value.trim();
            const correctAnswer = quizData[currentQuestionIndex].answer;
            const feedbackContainer = document.getElementById('feedback-container');
            const langData = translations[currentLang];

            if (userAnswer === correctAnswer) {
                feedbackContainer.textContent = langData.feedback_correct;
                feedbackContainer.className = 'feedback feedback-correct';
            } else {
                feedbackContainer.innerHTML = langData.feedback_incorrect_template(correctAnswer);
                feedbackContainer.className = 'feedback feedback-incorrect';
            }
            nextBtn.classList.remove('hidden');
            checkBtn.classList.add('hidden');
        }
        
        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizData.length) {
                loadQuestion();
            } else {
                quizContainer.innerHTML = `
                    <p class="text-xl font-bold text-center text-emerald-600">${translations[currentLang].quiz_end}</p>
                `;
                checkBtn.style.display = 'none';
                nextBtn.style.display = 'none';
            }
        }
        
        langSelector.addEventListener('change', changeLanguage);
        checkBtn.addEventListener('click', checkAnswer);
        nextBtn.addEventListener('click', nextQuestion);

        // Initial load
        window.onload = () => {
            changeLanguage();
            changeView('explanation');
        };
    </script>
</body>
</html>
