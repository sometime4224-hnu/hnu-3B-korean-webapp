<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>한국어 이유 문법</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #1e293b;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        .grammar-card {
            background-color: #ffffff;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .grammar-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.15);
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: #ffffff;
            padding: 2rem;
            border-radius: 1rem;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            animation: fadeIn 0.3s ease-in-out;
        }
        .close-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: #64748b;
        }
        .tabs {
            display: flex;
            border-bottom: 2px solid #e2e8f0;
            margin-bottom: 1rem;
        }
        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            font-weight: 600;
            color: #64748b;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }
        .tab.active {
            color: #1e293b;
            border-bottom: 2px solid #3b82f6;
        }
        .explanation-container {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background-color: #e2e8f0;
            border-radius: 0.75rem;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">
    <div class="container mx-auto p-6">
        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold text-blue-600 mb-2">한국어 이유 문법</h1>
            <p class="text-lg text-gray-600">유사성과 차이점을 한눈에 확인하고 공부하세요.</p>
            <div class="flex justify-center mt-4 space-x-2">
                <button class="lang-btn px-4 py-2 text-sm rounded-full bg-blue-500 text-white font-medium" data-lang="ko">한국어</button>
                <button class="lang-btn px-4 py-2 text-sm rounded-full bg-gray-300 text-gray-700 hover:bg-gray-400" data-lang="en">English</button>
                <button class="lang-btn px-4 py-2 text-sm rounded-full bg-gray-300 text-gray-700 hover:bg-gray-400" data-lang="vi">Tiếng Việt</button>
                <button class="lang-btn px-4 py-2 text-sm rounded-full bg-gray-300 text-gray-700 hover:bg-gray-400" data-lang="ja">日本語</button>
                <button class="lang-btn px-4 py-2 text-sm rounded-full bg-gray-300 text-gray-700 hover:bg-gray-400" data-lang="zh">中文</button>
            </div>
        </header>

        <!-- Main Groups -->
        <div class="flex flex-col md:flex-row space-y-8 md:space-y-0 md:space-x-8">
            <!-- Group 1: 가장 가까운 그룹 -->
            <div class="flex-1 bg-white p-6 rounded-2xl shadow-lg border-2 border-blue-200">
                <h2 class="text-2xl font-bold text-blue-600 mb-4 text-center">가장 보편적인 이유</h2>
                <p class="text-center text-gray-500 mb-6">대부분의 상황에서 바꿔 쓸 수 있지만, 뉘앙스 차이가 있어요.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="grammar-card" data-grammar="-아/어서">
                        <h3 class="font-semibold text-lg text-center">-아/어서</h3>
                    </div>
                    <div class="grammar-card" data-grammar="-(으)니까">
                        <h3 class="font-semibold text-lg text-center">-(으)니까</h3>
                    </div>
                    <div class="grammar-card" data-grammar="-기 때문에">
                        <h3 class="font-semibold text-lg text-center">-기 때문에</h3>
                    </div>
                    <div class="grammar-card" data-grammar="-(으)므로">
                        <h3 class="font-semibold text-lg text-center">-(으)므로</h3>
                    </div>
                </div>
                <button class="compare-btn w-full mt-6 py-3 px-4 rounded-full bg-blue-500 text-white font-semibold shadow-md hover:bg-blue-600 transition-colors" data-group="general">
                    <i class="fas fa-balance-scale-left mr-2"></i> 이 그룹의 차이점 보기
                </button>
            </div>

            <!-- Group 2: 특정 의미로 분화된 그룹 -->
            <div class="flex-1 bg-white p-6 rounded-2xl shadow-lg border-2 border-gray-200">
                <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">특정 의미로 분화된 이유</h2>
                <p class="text-center text-gray-500 mb-6">특정 상황에만 사용되는 문법들이에요.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="grammar-card" data-grammar="-느라고">
                        <h3 class="font-semibold text-lg text-center">-느라고</h3>
                    </div>
                    <div class="grammar-card" data-grammar="-는 바람에">
                        <h3 class="font-semibold text-lg text-center">-는 바람에</h3>
                    </div>
                    <div class="grammar-card" data-grammar="-는 통에">
                        <h3 class="font-semibold text-lg text-center">-는 통에</h3>
                    </div>
                    <div class="grammar-card" data-grammar="-는 탓에">
                        <h3 class="font-semibold text-lg text-center">-는 탓에</h3>
                    </div>
                    <div class="grammar-card" data-grammar="-았더니/었더니">
                        <h3 class="font-semibold text-lg text-center">-았더니/었더니</h3>
                    </div>
                    <div class="grammar-card" data-grammar="-다 보니">
                        <h3 class="font-semibold text-lg text-center">-다 보니</h3>
                    </div>
                    <div class="grammar-card" data-grammar="-고 해서">
                        <h3 class="font-semibold text-lg text-center">-고 해서</h3>
                    </div>
                    <div class="grammar-card" data-grammar="-는 덕분에">
                        <h3 class="font-semibold text-lg text-center">-는 덕분에</h3>
                    </div>
                </div>
                <button class="compare-btn w-full mt-6 py-3 px-4 rounded-full bg-gray-600 text-white font-semibold shadow-md hover:bg-gray-700 transition-colors" data-group="specific">
                    <i class="fas fa-balance-scale-left mr-2"></i> 이 그룹의 차이점 보기
                </button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="grammarModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <div class="tabs">
                <div class="tab active" data-tab="info">설명</div>
                <div class="tab" data-tab="examples">예문</div>
            </div>
            <h2 id="modalTitle" class="text-2xl font-bold text-center mb-4"></h2>
            <div id="modalContent" class="text-gray-700 text-base">
                <div id="infoTab" class="tab-content"></div>
                <div id="examplesTab" class="tab-content hidden"></div>
            </div>
            <button id="compareSpecificBtn" class="w-full mt-4 py-2 px-4 rounded-full bg-blue-500 text-white font-semibold shadow-md hover:bg-blue-600 transition-colors hidden">
                <i class="fas fa-info-circle mr-2"></i> 특정 문법 비교하기
            </button>
        </div>
    </div>

    <!-- Comparison Modal -->
    <div id="compareModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 id="compareTitle" class="text-2xl font-bold text-center mb-4">문법 비교</h2>
            <div id="compareContent" class="explanation-container text-gray-700 text-base"></div>
        </div>
    </div>

    <script>
        const langData = {
            ko: {
                title: "한국어 이유 문법",
                subtitle: "유사성과 차이점을 한눈에 확인하고 공부하세요.",
                group1Title: "가장 보편적인 이유",
                group1Subtitle: "대부분의 상황에서 바꿔 쓸 수 있지만, 뉘앙스 차이가 있어요.",
                group1Btn: "이 그룹의 차이점 보기",
                group2Title: "특정 의미로 분화된 이유",
                group2Subtitle: "특정 상황에만 사용되는 문법들이에요.",
                group2Btn: "이 그룹의 차이점 보기",
                modalTitle: "설명",
                modalExample: "예문",
                compareBtn: "특정 문법 비교하기",
                compareTitle: "문법 비교",
                generalCompareDesc: "이 그룹의 문법들은 바꿔 쓸 수 있는 경우가 많지만, 각각 뉘앙스와 사용되는 환경이 다릅니다. <br><br><ul><li><strong>-아/어서:</strong> 가장 기본적이고 단순한 이유를 나타냅니다. 시간적 선후 관계도 표현해요. '늦어서 미안해요.'</li><li><strong>-(으)니까:</strong> 말하는 사람의 주관적 판단이나 경험에 근거한 이유를 말할 때 씁니다. '늦었으니까 빨리 갑시다.'</li><li><strong>-기 때문에:</strong> 객관적이고 공식적인 이유를 설명할 때 사용해요. '그는 몸이 아팠기 때문에 결석했다.'</li><li><strong>-(으)므로:</strong> 논리적이고 문어체적인 이유를 제시할 때 사용합니다. 공식 문서나 발표에서 주로 볼 수 있어요. '본 문서는 중요하므로 소중히 보관하십시오.'</li></ul>",
                specificCompareDesc: {
                    negative: "이 문법들은 모두 '부정적인 결과'의 원인을 나타냅니다. 긍정적인 상황에는 쓰지 않아요.<br><br><ul><li><strong>-느라고:</strong> 앞의 행동 때문에 다른 일(주로 부정적)을 하지 못했을 때 씁니다. '공부**하느라고** 밥 먹는 것을 잊었어요.'</li><li><strong>-는 바람에:</strong> 예상치 못한 사건으로 인해 부정적 결과가 생겼을 때 씁니다. '갑자기 비가 **오는 바람에** 소풍이 취소됐어요.'</li><li><strong>-는 통에:</strong> 주변의 소란이나 복잡한 상황 때문에 일이 제대로 안 됐을 때 씁니다. '차가 **막히는 통에** 약속에 늦었어요.'</li><li><strong>-는 탓에:</strong> 앞의 원인을 탓하거나 원망하는 뉘앙스가 있어요. '네가 **늦게 온 탓에** 내가 벌을 받았잖아.'</li></ul>",
                    experience: "이 문법들은 '직접 경험'을 통해 어떤 사실을 알게 되었음을 나타냅니다.<br><br><ul><li><strong>-았더니/었더니:</strong> 과거의 어떤 행동을 한 결과, 새로운 사실을 알게 되었을 때 씁니다. '창문을 **열었더니** 시원한 바람이 들어왔어요.'</li><li><strong>-다 보니:</strong> 어떤 행동을 반복적으로 계속하다가 결과적으로 어떤 상태가 되었음을 나타냅니다. '매일 운동을 **하다 보니** 몸이 건강해졌어요.'</li></ul>"
                },
                grammars: {
                    "-아/어서": {
                        desc: "가장 기본적이고 널리 쓰이는 이유 문법입니다. 주로 '왜?'라는 질문에 대한 답으로 사용됩니다. 앞 문장의 주어와 뒷 문장의 주어가 다를 때 주로 사용하며, 단순한 시간적 순서를 나타내기도 합니다.",
                        examples: ["날씨가 추워서 감기에 걸렸어요.", "배가 고파서 밥을 먹었어요.", "집에 가서 숙제할게요."]
                    },
                    "-(으)니까": {
                        desc: "말하는 사람의 주관적인 판단이나 경험에 근거한 이유를 나타낼 때 사용합니다. '내가 해보니/생각해보니 이래서...'의 뉘앙스를 가집니다. 명령문이나 청유문과 함께 쓸 수 있습니다.",
                        examples: ["밖이 추우니까 옷을 따뜻하게 입으세요.", "바쁘시니까 다음에 다시 전화할게요.", "네가 늦었으니까 내가 대신 갈게."]
                    },
                    "-기 때문에": {
                        desc: "객관적인 사실이나 분명한 원인을 설명할 때 사용합니다. 논리적이고 격식 있는 상황에 주로 쓰입니다. 문어체와 구어체 모두 사용 가능합니다.",
                        examples: ["교통 체증이 심하기 때문에 늦었습니다.", "그는 감기에 걸렸기 때문에 학교에 오지 못했습니다.", "이것은 매우 중요한 문제이기 때문에 신중해야 합니다."]
                    },
                    "-(으)므로": {
                        desc: "매우 격식 있고 논리적인 이유를 나타냅니다. 주로 글이나 공식적인 발표에서 사용되는 문어체 문법입니다. 일상 대화에서는 거의 사용하지 않습니다.",
                        examples: ["본 제품은 친환경 재료를 사용했으므로 안심하고 사용하셔도 됩니다.", "시간이 없으므로 빨리 시작합시다.", "결과가 만족스러우므로 다음 단계로 넘어갑시다."]
                    },
                    "-느라고": {
                        desc: "앞선 행동에 집중하느라 다른 일을 하지 못했거나, 부정적인 결과가 발생했음을 나타냅니다. 앞 문장과 뒷 문장의 주어가 같아야 합니다. 주로 동사에 붙습니다.",
                        examples: ["게임하느라고 밤을 새웠어요.", "공부하느라고 밥 먹는 걸 잊었어요.", "바쁜 일하느라고 전화를 못 받았어요."]
                    },
                    "-는 바람에": {
                        desc: "갑작스럽거나 예상치 못한 일이 원인이 되어 부정적인 결과가 생겼을 때 사용합니다. 뒤에 오는 결과는 주로 불행하거나 아쉬운 상황입니다.",
                        examples: ["갑자기 비가 오는 바람에 소풍이 취소됐어요.", "차가 고장 나는 바람에 약속에 늦었어요.", "친구가 갑자기 아픈 바람에 여행을 못 갔어요."]
                    },
                    "-는 통에": {
                        desc: "주변의 시끄럽거나 복잡한 상황이 원인이 되어 부정적인 결과가 생겼을 때 사용합니다. 주로 주변 환경의 혼란을 강조합니다.",
                        examples: ["옆집 공사하는 통에 잠을 못 잤어요.", "아이들이 떠드는 통에 책에 집중할 수 없었어요.", "사람들이 많은 통에 길을 잃었어요."]
                    },
                    "-는 탓에": {
                        desc: "어떤 일의 원인을 탓하거나 원망하는 뉘앙스가 있습니다. 주로 부정적인 결과의 원인을 돌릴 때 사용합니다. '때문에'와 비슷하지만 원망의 느낌이 강합니다.",
                        examples: ["네가 늦게 온 탓에 우리가 벌을 받았어.", "날씨가 추운 탓에 감기가 나을 기미가 안 보여.", "그의 실수 탓에 프로젝트가 망가졌어."]
                    },
                    "-았더니/었더니": {
                        desc: "과거에 직접 경험한 행동이 어떤 결과를 가져왔음을 나타냅니다. 새로운 사실을 알게 되었을 때 자주 사용합니다.",
                        examples: ["창문을 열었더니 시원한 바람이 들어왔어요.", "열심히 공부했더니 성적이 올랐어요.", "전화했더니 받지 않았다."]
                    },
                    "-다 보니": {
                        desc: "어떤 행동을 계속 반복하다가 그 결과로 새로운 사실을 깨닫거나, 어떤 상태가 되었음을 나타냅니다. '자연스럽게 그렇게 되었다'는 느낌을 줍니다.",
                        examples: ["매일 운동을 하다 보니 몸이 가벼워졌어요.", "오래 살다 보니 이런 일도 다 겪네요.", "친구와 자주 만나다 보니 정이 들었어요."]
                    },
                    "-고 해서": {
                        desc: "여러 이유 중에서 한 가지를 대표적으로 말하며, 다른 이유들도 있음을 암시합니다. '등'과 비슷한 의미를 가집니다.",
                        examples: ["오랜만에 친구도 보고 해서 서울에 갔어요.", "운동도 할 겸 해서 바람도 쐴 겸 해서 나왔어요.", "일도 끝났고 해서 일찍 퇴근했어요."]
                    },
                    "-는 덕분에": {
                        desc: "앞선 원인으로 인해 좋은 결과가 생겼을 때 사용합니다. '덕분'이라는 단어 자체가 긍정적인 의미를 담고 있습니다.",
                        examples: ["선생님 덕분에 시험에 합격했어요.", "네가 도와준 덕분에 일이 잘 끝났어.", "맑은 날씨 덕분에 기분이 좋아요."]
                    }
                }
            },
            en: {
                title: "Korean Grammar for 'Reason'",
                subtitle: "Understand similarities and differences at a glance.",
                group1Title: "Most Common Reasons",
                group1Subtitle: "Often interchangeable, but with subtle differences.",
                group1Btn: "See Group Differences",
                group2Title: "Reason with Specific Meanings",
                group2Subtitle: "Used for specific situations only.",
                group2Btn: "See Group Differences",
                modalTitle: "Explanation",
                modalExample: "Examples",
                compareBtn: "Compare Specific Grammar",
                compareTitle: "Grammar Comparison",
                generalCompareDesc: "These grammars are often interchangeable, but have different nuances and contexts. <br><br><ul><li><strong>-아/어서:</strong> The most basic grammar for a simple reason or a sequence of events. 'I'm sorry **because** I'm late.'</li><li><strong>-(으)니까:</strong> Used for a reason based on the speaker's subjective judgment or experience. 'It's cold outside, **so** wear warm clothes.'</li><li><strong>-기 때문에:</strong> Used for objective and formal reasons. 'He was absent **because** he was sick.'</li><li><strong>-(으)므로:</strong> A very formal and logical way to state a reason. Used mainly in writing or official speeches. 'Since this document is important, please keep it safely.'</li></ul>",
                specificCompareDesc: {
                    negative: "These grammars all indicate a reason for a **negative outcome**. They are not used in positive contexts.<br><br><ul><li><strong>-느라고:</strong> Used when an action caused a negative result, often a missed opportunity. 'I stayed up all night **because** I was playing games.'</li><li><strong>-는 바람에:</strong> Used when a sudden, unexpected event caused a negative result. 'The picnic was canceled **because** it suddenly rained.'</li><li><strong>-는 통에:</strong> Used when a noisy or chaotic situation caused a negative result. 'I couldn't sleep **because** of the construction next door.'</li><li><strong>-는 탓에:</strong> Has a nuance of blaming the reason for the negative outcome. 'We got a penalty **because** you came late.'</li></ul>",
                    experience: "These grammars indicate that a new fact was learned through a **direct experience**.<br><br><ul><li><strong>-았더니/었더니:</strong> Used when a past action resulted in a new finding. 'I **opened** the window and a cool breeze came in.'</li><li><strong>-다 보니:</strong> Used when a repetitive action eventually led to a new state or realization. 'I've been exercising every day **and** my body feels lighter.'</li></ul>"
                },
                grammars: {
                    "-아/어서": {
                        desc: "The most basic and widely used grammar for a reason. It is primarily used to answer the question 'Why?'. It is mainly used when the subjects of the two sentences are different, and can also indicate a simple time sequence.",
                        examples: ["I got a cold because the weather was cold.", "I'm hungry, so I'll eat.", "I will go home and do my homework."]
                    },
                    "-(으)니까": {
                        desc: "Used to indicate a reason based on the speaker's subjective judgment or experience. It has the nuance of 'Since I did/thought...'. It can be used with imperative and propositive sentences.",
                        examples: ["Since it's cold outside, please wear warm clothes.", "Since you're busy, I'll call you again later.", "Since you're late, I'll go instead."]
                    },
                    "-기 때문에": {
                        desc: "Used to explain an objective fact or a clear cause. It is mainly used in logical and formal situations. It can be used in both written and spoken language.",
                        examples: ["I am late because of the heavy traffic.", "He was absent from school because he had a cold.", "This is a very important issue, so we must be cautious."]
                    },
                    "-(으)므로": {
                        desc: "Indicates a very formal and logical reason. It is a written grammar used mainly in articles or official presentations. It is rarely used in daily conversation.",
                        examples: ["You can use this product with confidence as it uses eco-friendly materials.", "Since we don't have time, let's start quickly.", "Since the result is satisfactory, let's move on to the next step."]
                    },
                    "-느라고": {
                        desc: "Used when one was so focused on an action that they could not do something else, resulting in a negative outcome. The subjects of the two clauses must be the same. It is only attached to verbs.",
                        examples: ["I stayed up all night playing games.", "I was so busy studying that I forgot to eat.", "I couldn't answer the phone because I was busy with work."]
                    },
                    "-는 바람에": {
                        desc: "Used when a sudden or unexpected event caused a negative outcome. The result is usually an unfortunate or regrettable situation.",
                        examples: ["The picnic was canceled because it suddenly rained.", "I was late for the appointment because my car broke down.", "I couldn't go on the trip because my friend suddenly got sick."]
                    },
                    "-는 통에": {
                        desc: "Used when a noisy or chaotic surrounding situation caused a negative outcome. It emphasizes the chaos of the environment.",
                        examples: ["I couldn't sleep because of the construction next door.", "I couldn't concentrate on my book because the children were being loud.", "I got lost because there were so many people."]
                    },
                    "-는 탓에": {
                        desc: "Has a nuance of blaming or resenting the reason for a negative outcome. It is used to point to the cause of a negative result. It's similar to 'because of', but with a stronger sense of blame.",
                        examples: ["We got punished because you came late.", "My cold isn't getting any better because of the cold weather.", "The project was ruined because of his mistake."]
                    },
                    "-았더니/었더니": {
                        desc: "Indicates that a past action you directly experienced led to a certain result. It is often used when a new fact is discovered.",
                        examples: ["I opened the window and a cool breeze came in.", "I studied hard and my grades went up.", "I called, but they didn't answer."]
                    },
                    "-다 보니": {
                        desc: "Indicates that a repetitive action eventually led to a new state or realization. It has the nuance of 'it naturally happened as I kept doing it'.",
                        examples: ["My body feels lighter since I've been exercising every day.", "As I got older, I've come to experience things like this.", "I've become close with my friend since we started meeting often."]
                    },
                    "-고 해서": {
                        desc: "Used to present one reason among several, implying that there are other reasons as well. It has a similar meaning to 'and so on'.",
                        examples: ["I went to Seoul to see my friend and for other reasons as well.", "I came out to get some exercise and to get some fresh air.", "I finished my work, so I'm leaving early."]
                    },
                    "-는 덕분에": {
                        desc: "Used when a good outcome occurred because of a reason. The word '덕분' (thanks to) itself has a positive connotation.",
                        examples: ["Thanks to the teacher, I passed the exam.", "Thanks to your help, the work went well.", "I'm in a good mood thanks to the clear weather."]
                    }
                }
            },
            vi: {
                title: "Ngữ pháp tiếng Hàn chỉ 'Lý do'",
                subtitle: "Dễ dàng nắm bắt sự tương đồng và khác biệt.",
                group1Title: "Nhóm phổ biến nhất",
                group1Subtitle: "Thường có thể thay thế cho nhau, nhưng có sắc thái khác biệt.",
                group1Btn: "Xem sự khác biệt của nhóm này",
                group2Title: "Nhóm có ý nghĩa cụ thể",
                group2Subtitle: "Chỉ được sử dụng trong các tình huống cụ thể.",
                group2Btn: "Xem sự khác biệt của nhóm này",
                modalTitle: "Giải thích",
                modalExample: "Ví dụ",
                compareBtn: "So sánh ngữ pháp cụ thể",
                compareTitle: "So sánh ngữ pháp",
                generalCompareDesc: "Những ngữ pháp này thường có thể thay thế cho nhau, nhưng chúng có sắc thái và ngữ cảnh sử dụng khác nhau. <br><br><ul><li><strong>-아/어서:</strong> Ngữ pháp cơ bản nhất cho một lý do đơn giản hoặc một chuỗi các sự kiện. 'Tôi xin lỗi **vì** đến muộn.'</li><li><strong>-(으)니까:</strong> Được sử dụng cho một lý do dựa trên phán đoán hoặc kinh nghiệm chủ quan của người nói. 'Ngoài trời lạnh **nên** hãy mặc quần áo ấm.'</li><li><strong>-기 때문에:</strong> Được sử dụng cho các lý do khách quan và trang trọng. 'Anh ấy vắng mặt **vì** bị ốm.'</li><li><strong>-(으)므로:</strong> Một cách rất trang trọng và logic để trình bày lý do. Được sử dụng chủ yếu trong văn viết hoặc các bài phát biểu chính thức. 'Vì tài liệu này quan trọng, xin hãy giữ gìn cẩn thận.'</li></ul>",
                specificCompareDesc: {
                    negative: "Những ngữ pháp này đều chỉ ra nguyên nhân của một **kết quả tiêu cực**. Chúng không được sử dụng trong ngữ cảnh tích cực.<br><br><ul><li><strong>-느라고:</strong> Được sử dụng khi một hành động gây ra một kết quả tiêu cực, thường là một cơ hội bị bỏ lỡ. 'Tôi thức trắng đêm **vì** chơi game.'</li><li><strong>-는 바람에:</strong> Được sử dụng khi một sự kiện bất ngờ, không mong muốn gây ra một kết quả tiêu cực. 'Buổi dã ngoại bị hủy **vì** trời đột ngột đổ mưa.'</li><li><strong>-는 통에:</strong> Được sử dụng khi một tình huống ồn ào hoặc hỗn loạn xung quanh gây ra một kết quả tiêu cực. 'Tôi không thể ngủ được **vì** tiếng ồn xây dựng ở nhà bên cạnh.'</li><li><strong>-는 탓에:</strong> Có sắc thái đổ lỗi hoặc oán giận cho nguyên nhân của kết quả tiêu cực. 'Chúng ta bị phạt **vì** bạn đến muộn.'</li></ul>",
                    experience: "Những ngữ pháp này chỉ ra rằng một sự thật mới được tìm thấy thông qua một **trải nghiệm trực tiếp**.<br><br><ul><li><strong>-았더니/었더니:</strong> Được sử dụng khi một hành động trong quá khứ dẫn đến một khám phá mới. 'Tôi **mở** cửa sổ và một làn gió mát ùa vào.'</li><li><strong>-다 보니:</strong> Được sử dụng khi một hành động lặp đi lặp lại cuối cùng dẫn đến một trạng thái hoặc nhận thức mới. 'Tôi đã tập thể dục hàng ngày và cơ thể cảm thấy nhẹ nhàng hơn.'</li></ul>"
                },
                grammars: {
                    "-아/어서": {
                        desc: "Ngữ pháp cơ bản và được sử dụng rộng rãi nhất để chỉ một lý do. Nó được sử dụng chủ yếu để trả lời câu hỏi 'Tại sao?'. Nó chủ yếu được sử dụng khi chủ ngữ của hai câu khác nhau và cũng có thể chỉ một trình tự thời gian đơn giản.",
                        examples: ["Tôi bị cảm vì thời tiết lạnh.", "Vì đói nên tôi sẽ ăn cơm.", "Tôi sẽ về nhà rồi làm bài tập."]
                    },
                    "-(으)니까": {
                        desc: "Được sử dụng để chỉ một lý do dựa trên phán đoán hoặc kinh nghiệm chủ quan của người nói. Nó có sắc thái 'Vì tôi đã làm/nghĩ...'. Nó có thể được sử dụng với câu mệnh lệnh và câu đề nghị.",
                        examples: ["Vì ngoài trời lạnh, hãy mặc quần áo ấm.", "Vì bạn bận, tôi sẽ gọi lại sau.", "Vì bạn đến muộn, tôi sẽ đi thay."]
                    },
                    "-기 때문에": {
                        desc: "Được sử dụng để giải thích một sự thật khách quan hoặc một nguyên nhân rõ ràng. Nó chủ yếu được sử dụng trong các tình huống logic và trang trọng. Có thể sử dụng trong cả văn viết và văn nói.",
                        examples: ["Tôi đến muộn vì tắc đường nghiêm trọng.", "Anh ấy không đến trường vì bị cảm.", "Đây là một vấn đề rất quan trọng, vì vậy chúng ta phải thận trọng."]
                    },
                    "-(으)므로": {
                        desc: "Chỉ một lý do rất trang trọng và logic. Đây là ngữ pháp văn viết được sử dụng chủ yếu trong các tài liệu hoặc bài thuyết trình chính thức. Nó hiếm khi được sử dụng trong cuộc trò chuyện hàng ngày.",
                        examples: ["Vì sản phẩm này sử dụng vật liệu thân thiện với môi trường, bạn có thể yên tâm sử dụng.", "Vì không có thời gian, hãy bắt đầu nhanh chóng.", "Vì kết quả hài lòng, chúng ta hãy chuyển sang bước tiếp theo."]
                    },
                    "-느라고": {
                        desc: "Được sử dụng khi một người quá tập trung vào một hành động đến nỗi không thể làm việc khác, dẫn đến một kết quả tiêu cực. Chủ ngữ của hai mệnh đề phải giống nhau. Nó chỉ gắn với động từ.",
                        examples: ["Tôi thức trắng đêm vì chơi game.", "Tôi bận học nên quên ăn cơm.", "Tôi không thể trả lời điện thoại vì bận việc."]
                    },
                    "-는 바람에": {
                        desc: "Được sử dụng khi một sự kiện đột ngột hoặc bất ngờ là nguyên nhân của một kết quả tiêu cực. Kết quả thường là một tình huống không may hoặc đáng tiếc.",
                        examples: ["Buổi dã ngoại bị hủy vì trời đột ngột đổ mưa.", "Tôi đến muộn vì xe bị hỏng.", "Tôi không thể đi du lịch vì bạn tôi đột nhiên bị ốm."]
                    },
                    "-는 통에": {
                        desc: "Được sử dụng khi một tình huống ồn ào hoặc hỗn loạn xung quanh gây ra một kết quả tiêu cực. Nó nhấn mạnh sự hỗn loạn của môi trường.",
                        examples: ["Tôi không thể ngủ được vì công trình xây dựng ở nhà bên cạnh.", "Tôi không thể tập trung vào cuốn sách của mình vì lũ trẻ ồn ào.", "Tôi bị lạc đường vì có quá nhiều người."]
                    },
                    "-는 탓에": {
                        desc: "Có sắc thái đổ lỗi hoặc oán giận cho nguyên nhân của một kết quả tiêu cực. Nó được sử dụng để chỉ ra nguyên nhân của một kết quả tiêu cực. Tương tự như 'vì', nhưng với cảm giác đổ lỗi mạnh mẽ hơn.",
                        examples: ["Chúng ta bị phạt vì bạn đến muộn.", "Bệnh cảm của tôi không tốt hơn vì thời tiết lạnh.", "Dự án bị hỏng vì lỗi của anh ấy."]
                    },
                    "-았더니/었더니": {
                        desc: "Chỉ ra rằng một hành động trong quá khứ bạn trực tiếp trải nghiệm đã dẫn đến một kết quả nhất định. Nó thường được sử dụng khi một sự thật mới được phát hiện.",
                        examples: ["Tôi mở cửa sổ và một làn gió mát ùa vào.", "Tôi học chăm chỉ và điểm số của tôi tăng lên.", "Tôi gọi nhưng họ không trả lời."]
                    },
                    "-다 보니": {
                        desc: "Chỉ ra rằng một hành động lặp đi lặp lại cuối cùng dẫn đến một trạng thái hoặc nhận thức mới. Nó có sắc thái 'điều đó tự nhiên xảy ra khi tôi tiếp tục làm'.",
                        examples: ["Cơ thể tôi cảm thấy nhẹ hơn kể từ khi tôi tập thể dục mỗi ngày.", "Sống lâu rồi tôi cũng trải qua những chuyện như thế này.", "Tôi trở nên thân thiết với bạn bè vì chúng tôi thường xuyên gặp nhau."]
                    },
                    "-고 해서": {
                        desc: "Được sử dụng để trình bày một trong số nhiều lý do, ngụ ý rằng còn có những lý do khác. Nó có ý nghĩa tương tự như 'và vân vân'.",
                        examples: ["Tôi đến Seoul để gặp bạn và nhiều lý do khác nữa.", "Tôi ra ngoài để tập thể dục và hít thở không khí trong lành.", "Tôi xong việc nên về sớm."]
                    },
                    "-는 덕분에": {
                        desc: "Được sử dụng khi một kết quả tốt xảy ra vì một lý do. Từ '덕분' (nhờ) bản thân nó đã mang ý nghĩa tích cực.",
                        examples: ["Nhờ thầy giáo, tôi đã vượt qua kỳ thi.", "Nhờ sự giúp đỡ của bạn, công việc đã hoàn thành tốt.", "Tôi có tâm trạng tốt nhờ thời tiết trong lành."]
                    }
                }
            },
            ja: {
                title: "韓国語の「理由」文法",
                subtitle: "類似点と相違点を一目で把握して学びましょう。",
                group1Title: "最も一般的な理由",
                group1Subtitle: "ほとんどの場合、置き換え可能ですが、微妙なニュアンスの違いがあります。",
                group1Btn: "このグループの違いを見る",
                group2Title: "特定の意味に特化した理由",
                group2Subtitle: "特定の状況でのみ使用される文法です。",
                group2Btn: "このグループの違いを見る",
                modalTitle: "説明",
                modalExample: "例文",
                compareBtn: "特定の文法を比較する",
                compareTitle: "文法比較",
                generalCompareDesc: "これらの文法は多くの場合置き換え可能ですが、それぞれニュアンスや使われる状況が異なります。<br><br><ul><li><strong>-아/어서:</strong> 最も基本的で単純な理由や時間の前後関係を表します。「遅れて**ごめんなさい**。」</li><li><strong>-(으)니까:</strong> 話し手の主観的な判断や経験に基づいた理由を表すときに使います。「寒い**から**暖かい服を着てください。」</li><li><strong>-기 때문에:</strong> 客観的で公式的な理由を説明するときに使います。「彼は病気**だったため**欠席した。」</li><li><strong>-(으)므로:</strong> 論理的で文語体的な理由を提示するときに使います。公式文書や発表でよく見られます。「この文書は重要**なので**大切に保管してください。」</li></ul>",
                specificCompareDesc: {
                    negative: "これらの文法はすべて**否定的な結果**の原因を表します。肯定的な状況では使いません。<br><br><ul><li><strong>-느라고:</strong> 前の行動に集中したために、他のこと（主に否定的なこと）ができなかったときに使います。「ゲームを**していたので**、ご飯を食べるのを忘れた。」</li><li><strong>-는 바람에:</strong> 予期せぬ出来事が原因で否定的な結果が生じたときに使います。「急に雨が**降ったせいで**ピクニックが中止になった。」</li><li><strong>-는 통에:</strong> 周囲の騒音や複雑な状況が原因で物事がうまくいかなかったときに使います。「隣の家の工事**のせいで**眠れなかった。」</li><li><strong>-는 탓에:</strong> 前の原因を責める、あるいは恨むニュアンスがあります。「君が遅く**来たせい**で、私たちが罰を受けたじゃないか。」</li></ul>",
                    experience: "これらの文法は、**直接的な経験**を通じて新しい事実を知ったことを表します。<br><br><ul><li><strong>-았더니/었더니:</strong> 過去のある行動をした結果、新しい事実を知ったときに使います。「窓を**開けたら**涼しい風が入ってきた。」</li><li><strong>-다 보니:</strong> ある行動を繰り返し続けた結果、ある状態になったことを表します。「毎日運動を**していたら**体が軽くなった。」</li></ul>"
                },
                grammars: {
                    "-아/어서": {
                        desc: "最も基本的で広く使われる理由文法です。主に「なぜ？」という質問に対する答えとして使われます。前後の文の主語が異なる場合によく使われ、単純な時間の順序を表すこともあります。",
                        examples: ["天気が寒くて風邪をひきました。", "お腹が空いたのでご飯を食べます。", "家に帰ってから宿題をしますね。"]
                    },
                    "-(으)니까": {
                        desc: "話し手の主観的な判断や経験に基づいた理由を表すときに使います。「私がしてみたら/考えてみたらこうだから...」というニュアンスを持ちます。命令文や勧誘文と一緒に使うことができます。",
                        examples: ["外が寒いから暖かくして出かけてください。", "忙しそうだから後でまた電話しますね。", "君が遅れたから私が代わりに行くよ。"]
                    },
                    "-기 때문에": {
                        desc: "客観的な事実や明確な原因を説明するときに使います。論理的で格式のある状況で主に使用されます。文語体と口語体の両方で使用可能です。",
                        examples: ["交通渋滞がひどいため遅刻しました。", "彼は風邪をひいたため学校に来れませんでした。", "これは非常に重要な問題であるため、慎重でなければなりません。"]
                    },
                    "-(으)므로": {
                        desc: "非常に格式があり、論理的な理由を表します。主に文章や公式発表で使用される文語体文法です。日常会話ではほとんど使われません。",
                        examples: ["この製品は環境に優しい素材を使用しているため、安心してご使用いただけます。", "時間がないので早く始めましょう。", "結果が満足のいくものなので、次の段階に進みましょう。"]
                    },
                    "-느라고": {
                        desc: "前の行動に集中したために、他のこと（主に否定的なこと）ができなかったり、否定的な結果が生じたりしたことを表します。前後の文の主語が同じでなければなりません。主に動詞に付きます。",
                        examples: ["ゲームをしていたので夜を明かしました。", "勉強していたのでご飯を食べるのを忘れました。", "忙しい仕事で電話に出られませんでした。"]
                    },
                    "-는 바람에": {
                        desc: "突然の、あるいは予期せぬ出来事が原因で否定的な結果が生じたときに使います。後に続く結果は、主に不幸なことや残念な状況です。",
                        examples: ["急に雨が降ったせいで、ピクニックが中止になりました。", "車が故障したせいで、約束に遅れました。", "友達が急に病気になったせいで、旅行に行けませんでした。"]
                    },
                    "-는 통에": {
                        desc: "周囲の騒音や複雑な状況が原因で、物事がうまくいかなかったときに使います。主に周囲の混乱を強調します。",
                        examples: ["隣の家の工事のせいで、眠れませんでした。", "子供たちが騒いでいたので、本に集中できませんでした。", "人が多いせいで、道に迷いました。"]
                    },
                    "-는 탓에": {
                        desc: "あることの原因を責めたり、恨むニュアンスがあります。主に否定的な結果の原因を非難するときに使います。「〜ため」と似ていますが、恨む気持ちが強いです。",
                        examples: ["君が遅く来たせいでもらい事故に遭ったじゃないか。", "天気が寒いせいか、風邪が治りません。", "彼のミスのせいでプロジェクトが台無しになった。"]
                    },
                    "-았더니/었더니": {
                        desc: "過去に直接経験した行動がある結果をもたらしたことを表します。新しい事実を知ったときに頻繁に使われます。",
                        examples: ["窓を開けたら、涼しい風が入ってきました。", "一生懸命勉強したら、成績が上がりました。", "電話してみたら、出なかった。"]
                    },
                    "-다 보니": {
                        desc: "ある行動を繰り返し続けるうちに、その結果として新しい事実を悟ったり、ある状態になったことを表します。「自然とそのようになった」という感じを与えます。",
                        examples: ["毎日運動をしていたら体が軽くなりました。", "長く生きているとこんなことも経験するんですね。", "友達と頻繁に会っていたら、情が湧きました。"]
                    },
                    "-고 해서": {
                        desc: "いくつかの理由の中から一つを代表的に述べ、他にも理由があることを暗示します。「など」と似た意味を持ちます。",
                        examples: ["久しぶりに友達にも会えるし、ソウルに行きました。", "運動も兼ねて、気分転換も兼ねて、外に出ました。", "仕事も終わったので、早く退勤しました。"]
                    },
                    "-는 덕분에": {
                        desc: "前の原因によって良い結果が生じたときに使います。「 덕분 」という言葉自体が肯定的な意味を含んでいます。",
                        examples: ["先生のおかげで試験に合格しました。", "手伝ってくれたおかげで仕事がうまくいった。", "晴れた天気のおかげで気分が良いです。"]
                    }
                }
            },
            zh: {
                title: "韩语“原因”语法",
                subtitle: "一眼了解异同并进行学习。",
                group1Title: "最常见的群体",
                group1Subtitle: "通常可以互换，但有细微差别。",
                group1Btn: "查看此组别的差异",
                group2Title: "具有特定含义的群体",
                group2Subtitle: "仅在特定情况下使用。",
                group2Btn: "查看此组别的差异",
                modalTitle: "解释",
                modalExample: "例句",
                compareBtn: "比较特定语法",
                compareTitle: "语法比较",
                generalCompareDesc: "这些语法通常可以互换，但它们具有不同的细微差别和使用上下文。<br><br><ul><li><strong>-아/어서:</strong> 最基本和最广泛使用的语法，表示简单的原因或事件的顺序。'对不起，**因为**我迟到了。'</li><li><strong>-(으)니까:</strong> 用于基于说话者主观判断或经验的原因。'外面很冷，**所以**请穿暖和的衣服。'</li><li><strong>-기 때문에:</strong> 用于客观和正式的原因。'他缺席**是因为**他生病了。'</li><li><strong>-(으)므로:</strong> 一种非常正式和合乎逻辑的陈述原因的方式。主要用于书面语或官方演讲。'既然这份文件很重要，请妥善保管。'</li></ul>",
                specificCompareDesc: {
                    negative: "这些语法都表示**负面结果**的原因。它们不用于积极的语境中。<br><br><ul><li><strong>-느라고:</strong> 用于当某个动作导致了负面结果时，通常是错失的机会。'我通宵玩游戏**所以**忘了吃饭。'</li><li><strong>-는 바람에:</strong> 用于当突然或意外的事件导致了负面结果时。'野餐被取消了，**因为**突然下雨了。'</li><li><strong>-는 통에:</strong> 用于当周围嘈杂或混乱的情况导致了负面结果时。'因为隔壁施工**很吵**，我没能睡着。'</li><li><strong>-는 탓에:</strong> 有一种责备原因导致负面结果的细微差别。'我们被惩罚了，**都怪**你来晚了。'</li></ul>",
                    experience: "这些语法表示通过**直接经验**了解了一个新事实。<br><br><ul><li><strong>-았더니/었더니:</strong> 用于过去的某个动作导致了新的发现。'我**打开**窗户，一阵凉风吹了进来。'</li><li><strong>-다 보니:</strong> 用于当重复性的动作最终导致了新的状态或领悟时。'我每天锻炼，**所以**身体感觉更轻了。'</li></ul>"
                },
                grammars: {
                    "-아/어서": {
                        desc: "最基本和最广泛使用的原因语法。它主要用于回答“为什么？”这个问题。它主要用于两个句子的主语不同时，也可以表示简单的时间顺序。",
                        examples: ["天气冷，所以我感冒了。", "肚子饿了，所以要吃饭。", "我要回家然后做作业。"]
                    },
                    "-(으)니까": {
                        desc: "用于表示基于说话者主观判断或经验的原因。它具有“因为我做了/想了……所以”的细微差别。它可以与命令句和提议句一起使用。",
                        examples: ["外面很冷，所以请穿暖和的衣服。", "既然你很忙，那我晚点再给你打电话。", "既然你迟到了，那我就替你去。"]
                    },
                    "-기 때문에": {
                        desc: "用于解释客观事实或明确的原因。它主要用于逻辑和正式的场合。它可以用于书面语和口语。",
                        examples: ["因为交通拥堵严重，所以我迟到了。", "他因为感冒，所以没能来学校。", "这是一个非常重要的问题，所以我们必须谨慎。"]
                    },
                    "-(으)므로": {
                        desc: "表示非常正式和合乎逻辑的原因。这是一种主要用于文章或官方演讲的书面语法。它很少用于日常对话。",
                        examples: ["由于本产品使用环保材料，您可以放心使用。", "既然没有时间，我们快点开始吧。", "既然结果令人满意，我们继续进行下一步。"]
                    },
                    "-느라고": {
                        desc: "用于表示因为专注于某个动作而未能做其他事情，从而导致了负面结果。两个句子的主语必须相同。它只附在动词后面。",
                        examples: ["我通宵玩游戏，所以熬夜了。", "因为忙着学习，我忘了吃饭。", "因为忙工作，所以没能接到电话。"]
                    },
                    "-는 바람에": {
                        desc: "用于表示突然或意外的事件是负面结果的原因。结果通常是不幸或遗憾的情况。",
                        examples: ["因为突然下雨，野餐被取消了。", "因为汽车坏了，我迟到了。", "因为朋友突然生病了，我没能去旅行。"]
                    },
                    "-는 통에": {
                        desc: "用于表示周围嘈杂或混乱的情况是负面结果的原因。它强调环境的混乱。",
                        examples: ["因为隔壁施工，我没能睡着。", "因为孩子们吵闹，我无法专心看书。", "因为人太多，我迷路了。"]
                    },
                    "-는 탓에": {
                        desc: "具有责备或抱怨原因导致负面结果的细微差别。它用于指出负面结果的原因。类似于“因为”，但有更强的责备感。",
                        examples: ["因为你来晚了，我们受到了惩罚。", "因为天气冷，感冒好像没好转的迹象。", "因为他的失误，项目搞砸了。"]
                    },
                    "-았더니/었더니": {
                        desc: "表示你直接经历过的某个过去的动作导致了某个结果。它经常用于发现新事实时。",
                        examples: ["我打开窗户，一阵凉风吹了进来。", "我努力学习，所以成绩提高了。", "我打电话了，但是他没接。"]
                    },
                    "-다 보니": {
                        desc: "表示重复的动作最终导致了新的状态或领悟。它有“自然而然地发生了”的细微差别。",
                        examples: ["我每天锻炼，所以身体感觉更轻了。", "活得久了，这种事也会遇到。", "因为经常和朋友见面，所以变得亲近了。"]
                    },
                    "-고 해서": {
                        desc: "用于在几个原因中代表性地提出一个，暗示还有其他原因。它具有“等等”的类似含义。",
                        examples: ["我去了首尔，因为可以见到朋友，等等。", "我出去是为了运动和呼吸新鲜空气。", "工作结束了，所以早点下班了。"]
                    },
                    "-는 덕분에": {
                        desc: "用于表示因为某个原因而产生了好的结果。“덕분”（托……的福）这个词本身就带有积极的含义。",
                        examples: ["托老师的福，我通过了考试。", "托你的帮助，工作进展顺利。", "托晴朗天气的福，我心情很好。"]
                    }
                }
            }
        };

        let currentLang = 'ko';

        const grammarData = langData[currentLang].grammars;

        document.querySelectorAll('.grammar-card').forEach(card => {
            card.addEventListener('click', () => {
                const grammar = card.dataset.grammar;
                showGrammarModal(grammar);
            });
        });

        document.getElementById('grammarModal').addEventListener('click', (event) => {
            if (event.target.classList.contains('close-button') || event.target === event.currentTarget) {
                document.getElementById('grammarModal').style.display = 'none';
            }
        });

        document.getElementById('compareModal').addEventListener('click', (event) => {
            if (event.target.classList.contains('close-button') || event.target === event.currentTarget) {
                document.getElementById('compareModal').style.display = 'none';
            }
        });

        document.querySelectorAll('.compare-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const group = btn.dataset.group;
                showCompareModal(group);
            });
        });

        function showGrammarModal(grammar) {
            const modal = document.getElementById('grammarModal');
            const title = document.getElementById('modalTitle');
            const infoTab = document.getElementById('infoTab');
            const examplesTab = document.getElementById('examplesTab');
            const compareBtn = document.getElementById('compareSpecificBtn');

            const data = langData[currentLang].grammars[grammar];
            title.textContent = grammar;
            infoTab.innerHTML = `<div class="p-4 bg-gray-100 rounded-lg">${data.desc}</div>`;
            examplesTab.innerHTML = `<ul>${data.examples.map(ex => `<li class="mb-2 p-2 bg-blue-50 rounded-lg">${ex}</li>`).join('')}</ul>`;

            const grammarTabs = document.querySelectorAll('#grammarModal .tab');
            grammarTabs.forEach(tab => tab.classList.remove('active'));
            document.querySelector('#grammarModal [data-tab="info"]').classList.add('active');
            
            const tabContents = document.querySelectorAll('#grammarModal .tab-content');
            tabContents.forEach(content => content.classList.add('hidden'));
            document.getElementById('infoTab').classList.remove('hidden');

            // Logic to show compare button based on grammar
            if (['-(으)니까', '-느라고', '-는 바람에', '-는 통에', '-는 탓에', '-았더니/었더니', '-다 보니', '-고 해서', '-는 덕분에'].includes(grammar)) {
                compareBtn.classList.remove('hidden');
            } else {
                compareBtn.classList.add('hidden');
            }

            modal.style.display = 'flex';
        }

        document.querySelectorAll('#grammarModal .tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;
                document.querySelectorAll('#grammarModal .tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                document.querySelectorAll('#grammarModal .tab-content').forEach(c => c.classList.add('hidden'));
                document.getElementById(tabName + 'Tab').classList.remove('hidden');
            });
        });

        function showCompareModal(group) {
            const modal = document.getElementById('compareModal');
            const title = document.getElementById('compareTitle');
            const content = document.getElementById('compareContent');
            
            title.textContent = langData[currentLang].compareTitle;
            if (group === 'general') {
                content.innerHTML = langData[currentLang].generalCompareDesc;
            } else if (group === 'specific') {
                content.innerHTML = `<h3 class="font-bold text-xl mb-2">${langData[currentLang].group2Title}</h3>
                <p class="text-gray-600 mb-4">${langData[currentLang].group2Subtitle}</p>
                <div class="mb-6"><h4 class="font-bold text-lg text-blue-600">부정적인 결과 그룹</h4>${langData[currentLang].specificCompareDesc.negative}</div>
                <div><h4 class="font-bold text-lg text-blue-600">경험/발견 그룹</h4>${langData[currentLang].specificCompareDesc.experience}</div>`;
            }
            modal.style.display = 'flex';
        }

        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', (event) => {
                const newLang = event.target.dataset.lang;
                if (newLang === currentLang) return;

                document.querySelectorAll('.lang-btn').forEach(b => {
                    b.classList.remove('bg-blue-500', 'text-white');
                    b.classList.add('bg-gray-300', 'text-gray-700', 'hover:bg-gray-400');
                });
                event.target.classList.remove('bg-gray-300', 'text-gray-700', 'hover:bg-gray-400');
                event.target.classList.add('bg-blue-500', 'text-white');

                currentLang = newLang;
                updateUI();
            });
        });
        
        function updateUI() {
            document.querySelector('h1').textContent = langData[currentLang].title;
            document.querySelector('p.text-lg').textContent = langData[currentLang].subtitle;
            
            const group1 = document.querySelector('.flex-1.bg-white:nth-of-type(1)');
            group1.querySelector('h2').textContent = langData[currentLang].group1Title;
            group1.querySelector('p').textContent = langData[currentLang].group1Subtitle;
            group1.querySelector('.compare-btn').textContent = langData[currentLang].group1Btn;

            const group2 = document.querySelector('.flex-1.bg-white:nth-of-type(2)');
            group2.querySelector('h2').textContent = langData[currentLang].group2Title;
            group2.querySelector('p').textContent = langData[currentLang].group2Subtitle;
            group2.querySelector('.compare-btn').textContent = langData[currentLang].group2Btn;

            const grammarCards = document.querySelectorAll('.grammar-card h3');
            grammarCards.forEach(card => {
                const grammar = card.textContent.trim();
                if (langData[currentLang].grammars[grammar]) {
                    // Title remains the same
                }
            });
        }
    </script>
</body>
</html>
