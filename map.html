<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>베트남 전국 63개 성/시 찾기</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .tap-highlight-transparent { -webkit-tap-highlight-color: transparent; }
        /* 스크롤바 숨김 (깔끔한 UI) */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 tap-highlight-transparent">

    <!-- 상단 고정 헤더 & 검색창 -->
    <header class="sticky top-0 bg-white border-b border-slate-200 shadow-md z-50">
        <div class="max-w-md mx-auto px-4 py-3">
            <div class="flex justify-between items-center mb-3">
                <h1 class="text-lg font-bold flex items-center gap-2 text-slate-900">
                    <i data-lucide="map" class="w-5 h-5 text-blue-600"></i>
                    베트남 전국 63개 지역
                </h1>
                <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-bold">Total 63</span>
            </div>
            
            <!-- 검색 입력창 -->
            <div class="relative">
                <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"></i>
                <input type="text" id="searchInput" placeholder="지역명 검색 (예: 하노이, nghe an...)" 
                    class="w-full pl-9 pr-4 py-2 bg-slate-100 border-0 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all placeholder:text-slate-400"
                    onkeyup="filterList()">
            </div>
        </div>
    </header>

    <!-- 메인 리스트 컨테이너 -->
    <main id="regionContainer" class="max-w-md mx-auto p-4 pb-20 space-y-6">
        <!-- 자바스크립트로 데이터가 렌더링 됩니다 -->
    </main>

    <!-- 팁 풋터 -->
    <div class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur border-t border-slate-200 p-3 z-40">
        <div class="max-w-md mx-auto text-xs text-center text-slate-500">
            학생의 고향이 검색되지 않으면 스펠링을 확인해주세요.
        </div>
    </div>

    <script>
        // Lucide 아이콘 초기화
        lucide.createIcons();

        // ---------------------------------------------------------
        // 데이터: 베트남 63개 성/시 전체 데이터베이스
        // ---------------------------------------------------------
        const regionData = [
            {
                id: 'north', name: '북부 (Miền Bắc)', color: 'red',
                subRegions: [
                    {
                        name: '동북부 (Đông Bắc Bộ)',
                        provinces: [
                            { kr: '하장', vn: 'Hà Giang', type: 'prov' },
                            { kr: '까오방', vn: 'Cao Bằng', type: 'prov' },
                            { kr: '박깐', vn: 'Bắc Kạn', type: 'prov' },
                            { kr: '랑선', vn: 'Lạng Sơn', type: 'prov' },
                            { kr: '뚜옌꽝', vn: 'Tuyên Quang', type: 'prov' },
                            { kr: '타이응우옌', vn: 'Thái Nguyên', type: 'prov' },
                            { kr: '푸토', vn: 'Phú Thọ', type: 'prov' },
                            { kr: '박장', vn: 'Bắc Giang', type: 'prov' },
                            { kr: '꽝닌', vn: 'Quảng Ninh', type: 'prov', desc: '하롱베이' }
                        ]
                    },
                    {
                        name: '서북부 (Tây Bắc Bộ)',
                        provinces: [
                            { kr: '라오까이', vn: 'Lào Cai', type: 'prov', desc: '사파' },
                            { kr: '옌바이', vn: 'Yên Bái', type: 'prov' },
                            { kr: '디엔비엔', vn: 'Điện Biên', type: 'prov' },
                            { kr: '라이쩌우', vn: 'Lai Châu', type: 'prov' },
                            { kr: '선라', vn: 'Sơn La', type: 'prov' },
                            { kr: '호아빈', vn: 'Hòa Bình', type: 'prov' }
                        ]
                    },
                    {
                        name: '홍강 삼각주 (Đồng bằng sông Hồng)',
                        provinces: [
                            { kr: '하노이', vn: 'Hà Nội', type: 'city', desc: '수도' },
                            { kr: '하이퐁', vn: 'Hải Phòng', type: 'city', desc: '항구 도시' },
                            { kr: '박닌', vn: 'Bắc Ninh', type: 'prov', desc: '삼성 공장' },
                            { kr: '하남', vn: 'Hà Nam', type: 'prov' },
                            { kr: '하이즈엉', vn: 'Hải Dương', type: 'prov' },
                            { kr: '흥옌', vn: 'Hưng Yên', type: 'prov' },
                            { kr: '남딘', vn: 'Nam Định', type: 'prov' },
                            { kr: '닌빈', vn: 'Ninh Bình', type: 'prov', desc: '육지의 하롱베이' },
                            { kr: '타이빈', vn: 'Thái Bình', type: 'prov' },
                            { kr: '빈푹', vn: 'Vĩnh Phúc', type: 'prov' }
                        ]
                    }
                ]
            },
            {
                id: 'central', name: '중부 (Miền Trung)', color: 'green',
                subRegions: [
                    {
                        name: '북중부 (Bắc Trung Bộ)',
                        provinces: [
                            { kr: '타인호아', vn: 'Thanh Hóa', type: 'prov' },
                            { kr: '응에안', vn: 'Nghệ An', type: 'prov', desc: '호찌민 고향' },
                            { kr: '하띤', vn: 'Hà Tĩnh', type: 'prov' },
                            { kr: '꽝빈', vn: 'Quảng Bình', type: 'prov', desc: '퐁냐케방' },
                            { kr: '꽝찌', vn: 'Quảng Trị', type: 'prov' },
                            { kr: '투아티엔 후에', vn: 'Thừa Thiên Huế', type: 'prov', desc: '옛 수도' }
                        ]
                    },
                    {
                        name: '남중부 해안 (Duyên hải Nam Trung Bộ)',
                        provinces: [
                            { kr: '다낭', vn: 'Đà Nẵng', type: 'city', desc: '관광/상업 중심' },
                            { kr: '꽝남', vn: 'Quảng Nam', type: 'prov', desc: '호이안' },
                            { kr: '꽝응아이', vn: 'Quảng Ngãi', type: 'prov' },
                            { kr: '빈딘', vn: 'Bình Định', type: 'prov', desc: '퀴논' },
                            { kr: '푸옌', vn: 'Phú Yên', type: 'prov' },
                            { kr: '카인호아', vn: 'Khánh Hòa', type: 'prov', desc: '나트랑' },
                            { kr: '닌투언', vn: 'Ninh Thuận', type: 'prov' },
                            { kr: '빈투언', vn: 'Bình Thuận', type: 'prov', desc: '무이네' }
                        ]
                    },
                    {
                        name: '서부 고원 (Tây Nguyên)',
                        provinces: [
                            { kr: '콘툼', vn: 'Kon Tum', type: 'prov' },
                            { kr: '지아라이', vn: 'Gia Lai', type: 'prov' },
                            { kr: '닥락', vn: 'Đắk Lắk', type: 'prov' },
                            { kr: '닥농', vn: 'Đắk Nông', type: 'prov' },
                            { kr: '럼동', vn: 'Lâm Đồng', type: 'prov', desc: '달랏' }
                        ]
                    }
                ]
            },
            {
                id: 'south', name: '남부 (Miền Nam)', color: 'blue',
                subRegions: [
                    {
                        name: '동남부 (Đông Nam Bộ)',
                        provinces: [
                            { kr: '호찌민', vn: 'TP. Hồ Chí Minh', type: 'city', desc: '경제 수도' },
                            { kr: '바리어 붕따우', vn: 'Bà Rịa–Vũng Tàu', type: 'prov' },
                            { kr: '빈즈엉', vn: 'Bình Dương', type: 'prov', desc: '공단 밀집' },
                            { kr: '빈푹 (남부)', vn: 'Bình Phước', type: 'prov' },
                            { kr: '동나이', vn: 'Đồng Nai', type: 'prov' },
                            { kr: '떠이닌', vn: 'Tây Ninh', type: 'prov' }
                        ]
                    },
                    {
                        name: '메콩강 삼각주 (Đồng bằng sông Cửu Long)',
                        provinces: [
                            { kr: '껀터', vn: 'Cần Thơ', type: 'city', desc: '메콩 중심' },
                            { kr: '안장', vn: 'An Giang', type: 'prov' },
                            { kr: '박리에우', vn: 'Bạc Liêu', type: 'prov' },
                            { kr: '벤째', vn: 'Bến Tre', type: 'prov', desc: '코코넛' },
                            { kr: '까마우', vn: 'Cà Mau', type: 'prov', desc: '최남단' },
                            { kr: '동탑', vn: 'Đồng Tháp', type: 'prov' },
                            { kr: '하우장', vn: 'Hậu Giang', type: 'prov' },
                            { kr: '끼엔장', vn: 'Kiên Giang', type: 'prov', desc: '푸꾸옥' },
                            { kr: '롱안', vn: 'Long An', type: 'prov' },
                            { kr: '속짱', vn: 'Sóc Trăng', type: 'prov' },
                            { kr: '띠엔장', vn: 'Tiền Giang', type: 'prov' },
                            { kr: '짜빈', vn: 'Trà Vinh', type: 'prov' },
                            { kr: '빈롱', vn: 'Vĩnh Long', type: 'prov' }
                        ]
                    }
                ]
            }
        ];

        // ---------------------------------------------------------
        // 렌더링 함수
        // ---------------------------------------------------------
        const container = document.getElementById('regionContainer');

        function renderRegions(filterText = '') {
            container.innerHTML = '';
            const normalizedFilter = filterText.toLowerCase().trim();

            regionData.forEach(region => {
                // 해당 권역(Region) 내에 검색어가 포함된 성(Province)이 있는지 확인
                const matchingSubRegions = region.subRegions.map(sub => {
                    const matchingProvinces = sub.provinces.filter(p => 
                        p.kr.includes(normalizedFilter) || 
                        p.vn.toLowerCase().includes(normalizedFilter)
                    );
                    return { ...sub, provinces: matchingProvinces };
                }).filter(sub => sub.provinces.length > 0);

                // 검색어가 없으면 전체 표시, 검색어가 있으면 매칭된 것만 표시
                const displaySubRegions = normalizedFilter ? matchingSubRegions : region.subRegions;

                if (displaySubRegions.length > 0) {
                    const section = document.createElement('section');
                    
                    // 대분류 헤더 (북부/중부/남부)
                    const headerColorClass = region.color === 'red' ? 'bg-red-50 text-red-900 border-red-200' :
                                           region.color === 'green' ? 'bg-green-50 text-green-900 border-green-200' :
                                           'bg-blue-50 text-blue-900 border-blue-200';
                    
                    section.innerHTML = `
                        <div class="px-4 py-2 rounded-t-lg border-b-2 ${headerColorClass} font-bold text-lg mt-4">
                            ${region.name}
                        </div>
                    `;

                    // 중분류 (권역) 렌더링
                    displaySubRegions.forEach((sub, subIndex) => {
                        const subDiv = document.createElement('div');
                        subDiv.className = "bg-white border-l border-r border-b border-slate-200 last:rounded-b-lg";
                        
                        // 아코디언 헤더 (권역 이름)
                        // 검색 중일 때는 항상 펼침(open), 아닐 때는 첫 번째만 펼치거나 닫음
                        const isOpen = normalizedFilter.length > 0; 
                        
                        const details = document.createElement('details');
                        if (isOpen) details.open = true;
                        details.className = "group";

                        details.innerHTML = `
                            <summary class="cursor-pointer p-3 bg-slate-50 hover:bg-slate-100 font-semibold text-slate-700 flex justify-between items-center select-none">
                                <span class="text-sm">${sub.name} <span class="text-xs font-normal text-slate-400 ml-1">(${sub.provinces.length})</span></span>
                                <i data-lucide="chevron-down" class="w-4 h-4 text-slate-400 transition-transform group-open:rotate-180"></i>
                            </summary>
                            <div class="divide-y divide-slate-100">
                                ${sub.provinces.map(prov => `
                                    <button onclick="openMap('${prov.vn}')" class="w-full text-left p-3 pl-4 hover:bg-blue-50 active:bg-blue-100 transition-colors flex items-center justify-between group/item">
                                        <div class="flex items-center gap-3">
                                            <div class="w-2 h-2 rounded-full ${prov.type === 'city' ? 'bg-red-500 ring-2 ring-red-200' : 'bg-slate-300'}"></div>
                                            <div>
                                                <div class="flex items-center gap-2">
                                                    <span class="text-sm font-bold ${prov.type === 'city' ? 'text-slate-900' : 'text-slate-600'}">${prov.kr}</span>
                                                    ${prov.type === 'city' ? '<span class="text-[9px] bg-slate-800 text-white px-1 rounded">직할시</span>' : ''}
                                                </div>
                                                <div class="text-xs text-blue-600">${prov.vn}</div>
                                                ${prov.desc ? `<div class="text-[10px] text-slate-400 mt-0.5">${prov.desc}</div>` : ''}
                                            </div>
                                        </div>
                                        <i data-lucide="external-link" class="w-4 h-4 text-slate-300 group-hover/item:text-blue-500"></i>
                                    </button>
                                `).join('')}
                            </div>
                        `;
                        subDiv.appendChild(details);
                        section.appendChild(subDiv);
                    });
                    container.appendChild(section);
                }
            });

            // 검색 결과 없음 메시지
            if (container.innerHTML === '') {
                container.innerHTML = `
                    <div class="text-center py-10 text-slate-400">
                        <i data-lucide="frown" class="w-10 h-10 mx-auto mb-2 opacity-50"></i>
                        <p>검색 결과가 없습니다.<br>베트남어 스펠링이나 한글을 확인해주세요.</p>
                    </div>
                `;
            }
            lucide.createIcons();
        }

        // 검색 필터 함수
        function filterList() {
            const input = document.getElementById('searchInput');
            renderRegions(input.value);
        }

        // 구글 맵 열기
        function openMap(query) {
            const url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query + ' Vietnam')}`;
            window.open(url, '_blank');
        }

        // 초기 렌더링
        renderRegions();

    </script>
</body>
</html>

