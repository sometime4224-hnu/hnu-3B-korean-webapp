<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>여가 활동 말하기 연습</title>
    <!-- Tailwind CSS 로드 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Noto Sans KR 폰트 로드 -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        body {
            font-family: 'Noto Sans KR', 'Inter', sans-serif;
        }
        
        /* [FIX] 카드에 perspective 추가 */
        #card {
            perspective: 1000px;
        }

        /* 카드 뒤집기 애니메이션을 위한 스타일 */
        .card-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        /* [FIX] CSS 선택자 수정: .card.flipped -> #card.flipped */
        #card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }
        .card-back {
            transform: rotateY(180deg);
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <!-- [NEW] 전체 질문 보기 버튼 -->
    <button id="show-all-btn" onclick="showAllQuestions()" class="fixed top-4 right-4 bg-white text-indigo-600 px-4 py-2 rounded-lg shadow-md font-medium hover:bg-gray-50 z-50 transition-colors">
        전체 질문 보기
    </button>

    <!-- [NEW] 전체 질문 보기 모달 -->
    <div id="modal-overlay" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-40 hidden" onclick="hideAllQuestions()">
        <div id="modal-content" class="bg-white w-full max-w-2xl rounded-xl shadow-lg p-6 md:p-8 max-h-[90vh] flex flex-col" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">전체 질문 (1-8)</h2>
                <button onclick="hideAllQuestions()" class="text-gray-500 hover:text-gray-800 text-3xl leading-none">&times;</button>
            </div>
            <!-- 질문 목록이 채워질 영역 -->
            <ul id="all-questions-list" class="space-y-2 overflow-y-auto">
                <!-- JS will populate this -->
            </ul>
        </div>
    </div>

    <!-- 메인 컨텐츠 -->
    <div class="w-full max-w-2xl mx-auto">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">
            여가 활동 말하기 연습 📝
        </h1>

        <!-- 
          [FIX] 질문 카드: 'perspective' 클래스 제거 
          (스타일 태그에서 #card ID로 perspective 속성을 직접 부여함) 
        -->
        <div id="card" class="bg-white rounded-xl shadow-lg min-h-[400px]">
            <div id="card-inner" class="card-inner relative w-full h-full min-h-[400px]">
                
                <!-- 카드 앞면 (질문) -->
                <div id="card-front" class="card-front absolute w-full h-full p-6 md:p-8 flex flex-col justify-between">
                    <div>
                        <div id="question-stage" class="text-sm font-medium text-indigo-600 mb-2">
                            <!-- JS로 내용 채움 -->
                        </div>
                        <div id="question-text" class="text-2xl md:text-3xl font-bold text-gray-900 leading-snug">
                            <!-- JS로 내용 채움 -->
                        </div>
                    </div>
                    <button 
                        onclick="toggleHint()" 
                        class="w-full mt-6 bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                        💡 답변 힌트 보기
                    </button>
                </div>

                <!-- 카드 뒷면 (힌트) -->
                <div id="card-back" class="card-back absolute w-full h-full p-6 md:p-8 bg-indigo-50 rounded-xl overflow-y-auto">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-indigo-800">
                            ✨ 이렇게 말해볼까요?
                        </h3>
                        <button 
                            onclick="toggleHint()"
                            class="text-sm font-medium text-indigo-600 hover:text-indigo-800">
                            질문으로 돌아가기 &times;
                        </button>
                    </div>
                    
                    <div class="space-y-4">
                        <div>
                            <h4 class="font-semibold text-gray-700">📌 추천 문법</h4>
                            <ul id="grammar-list" class="list-disc list-inside text-gray-600 mt-1 space-y-1">
                                <!-- JS로 내용 채움 -->
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-700">💬 예시 답안</h4>
                            <div id="example-list" class="space-y-2 mt-1">
                                <!-- JS로 내용 채움 -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 네비게이션 버튼 -->
        <div class="flex justify-between items-center mt-6">
            <button 
                id="prev-btn"
                onclick="showPrev()"
                class="bg-white text-gray-700 font-medium py-2 px-5 rounded-lg shadow hover:bg-gray-50 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-300">
                이전
            </button>
            <div id="question-progress" class="text-gray-600 font-medium">
                <!-- JS로 내용 채움 -->
            </div>
            <button 
                id="next-btn"
                onclick="showNext()"
                class="bg-white text-gray-700 font-medium py-2 px-5 rounded-lg shadow hover:bg-gray-50 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-300">
                다음
            </button>
        </div>
    </div>

    <script>
        // 질문 데이터 (이전과 동일)
        const questions = [
            // 1단계
            {
                stage: "1단계: 나의 여가 활동",
                question: "1. 여러분은 주말에 보통 뭐 해요?",
                grammar: [
                    "`A-고 B` (활동 나열)",
                    "`주로` (Adverb)",
                    "`V-는 길에` (on the way)"
                ],
                examples: [
                    "저는 <strong>주로</strong> 집에서 쉬어요. 책을 읽<strong>고</strong> 영화도 봐요.",
                    "친구를 만나러 시내에 가요. <strong>집에 돌아오-는 길에</strong> 보통 마트에 들러요."
                ]
            },
            {
                stage: "1단계: 나의 여가 활동",
                question: "2. '집에서 하는 활동'하고 '밖에서 하는 활동' 중에 무엇을 더 좋아해요? 왜요?",
                grammar: [
                    "`A보다 B를 더 좋아하다`",
                    "`-기 때문에` (이유)",
                    "`하도 A/V-아서/어서` (because... so much)"
                ],
                examples: [
                    "저는 밖에서 하는 활동을 <strong>더 좋아해요</strong>. <strong>왜냐하면</strong> 친구들을 만날 수 있<strong>기 때문에</strong>요.",
                    "<strong>하도</strong> 집에만 있<strong>어서</strong> 가끔 답답하거든요."
                ]
            },
            {
                stage: "1단계: 나의 여가 활동",
                question: "3. 여러분이 *가장* 좋아하는 여가 활동은 뭐예요? 언제, 어디에서, 얼마나 자주 해요?",
                grammar: [
                    "빈도 부사 (가끔, 자주)",
                    "`일주일에 -번`",
                    "`V-았/었던` (recalling a past action/state)"
                ],
                examples: [
                    "제가 가장 좋아하는 것은 '자전거 타기'예요. 지난 주말에 <strong>탔었던</strong> 한강 공원이 정말 좋았어요."
                ]
            },
            // 2단계
            {
                stage: "2단계: 여가 활동의 방식",
                question: "4. 쉴 때 '혼자' 있는 것을 좋아해요, '같이' 있는 것을 좋아해요?",
                grammar: [
                    "`V-는 것` (동사를 명사로 만들기)"
                ],
                examples: [
                    "저는 <strong>혼자</strong> 조용히 음악을 듣<strong>는 것</strong>을 좋아해요. 그 시간이 편해요.",
                    "저는 친구들<strong>과 같이</strong> 운동하<strong>는 것</strong>을 좋아해요. 더 재미있어요."
                ]
            },
            {
                stage: "2단계: 여가 활동의 방식",
                question: "5. 최근에 가족이나 친구하고 같이 해서 재미있었던 일이 있어요?",
                grammar: [
                    "`A-았/었-` (과거 시제)",
                    "`-(아/어)서` (이유)",
                    "`V-(으)ㄹ 만하다` (to be worth doing)"
                ],
                examples: [
                    "지난 주말에 친구하고 '방탈출 카페'에 <strong>갔어요</strong>. <strong>한번 해 볼 만해요</strong>."
                ]
            },
            // 3단계
            {
                stage: "3단계: 새로운 경험과 주변의 이야기",
                question: "6. 여러분 고향(나라)에서는 요즘 어떤 활동이 인기가 많아요?",
                grammar: [
                    "`-(으)ㄴ/는 것 같다` (추측, 생각)",
                    "`N(으)로 유명하다`",
                    "`A/V-(으)ㄹ걸(요)` (supposition)"
                ],
                examples: [
                    "제 고향은 바다<strong>로 유명해</strong>서 '서핑'이 인기가 많아요.",
                    "글쎄요... 요즘은 '캠핑'이 인기 있<strong>을걸요</strong>?"
                ]
            },
            {
                stage: "3단계: 새로운 경험과 주변의 이야기",
                question: "7. 앞으로 새로 배우고 싶은 것이 있어요? (예: 요리, 악기, 운동)",
                grammar: [
                    "`V-고 싶다` (희망, 바람)",
                    "`V-(으)ㄹ 생각도 못 하다` (can't even think of doing)"
                ],
                examples: [
                    "요즘 <strong>하도</strong> 바빠서 쉴 <strong>생각도 못 했어</strong>요. 여유가 생기면 꼭 기타를 배우<strong>고 싶어요</strong>."
                ]
            },
            // 4단계
            {
                stage: "4단계: 생각 정리하기",
                question: "8. 여러분에게 '쉬는 시간(여가 시간)'은 왜 중요해요?",
                grammar: [
                    "`A/V-(으)면 A/V-(으)ㄹ수록`",
                    "`V-게 하다` (to make...)",
                    "`A/V-지 않으면 안 되다` (must)"
                ],
                examples: [
                    "일이 <strong>바쁘면 바쁠수록</strong> 쉬는 시간이 더 필요하다고 생각해요.",
                    "좋아하는 여가 활동은 저를 행복하<strong>게 해요</strong>.",
                    "건강하게 살려면 <strong>쉬지 않으면 안 된다고</strong> 생각해요."
                ]
            }
        ];

        // 앱 상태
        let currentQuestionIndex = 0;
        let isFlipped = false;

        // HTML 요소 가져오기
        const card = document.getElementById('card');
        const cardInner = document.getElementById('card-inner');
        const questionStage = document.getElementById('question-stage');
        const questionText = document.getElementById('question-text');
        const grammarList = document.getElementById('grammar-list');
        const exampleList = document.getElementById('example-list');
        const questionProgress = document.getElementById('question-progress');
        
        // [NEW] 모달 관련 요소
        const modalOverlay = document.getElementById('modal-overlay');
        const allQuestionsList = document.getElementById('all-questions-list');

        // 질문을 화면에 렌더링하는 함수
        function renderQuestion() {
            // 카드가 뒤집혀 있다면 다시 앞면으로 돌림
            if (isFlipped) {
                toggleHint();
            }

            const q = questions[currentQuestionIndex];

            // 앞면 (질문)
            questionStage.textContent = q.stage;
            questionText.textContent = q.question;

            // 뒷면 (힌트)
            grammarList.innerHTML = q.grammar.map(g => `<li>${g}</li>`).join('');
            exampleList.innerHTML = q.examples.map(ex => 
                `<p class="bg-white p-3 rounded-md text-gray-700 shadow-sm">${ex}</p>`
            ).join('');

            // 진행 상황
            questionProgress.textContent = `질문 ${currentQuestionIndex + 1} / ${questions.length}`;
        }

        // 힌트 보기/숨기기 (카드 뒤집기)
        function toggleHint() {
            isFlipped = !isFlipped;
            card.classList.toggle('flipped');
        }

        // 다음 질문
        function showNext() {
            currentQuestionIndex = (currentQuestionIndex + 1) % questions.length;
            renderQuestion();
        }

        // 이전 질문
        function showPrev() {
            currentQuestionIndex = (currentQuestionIndex - 1 + questions.length) % questions.length;
            renderQuestion();
        }

        // [NEW] 전체 질문 모달 보이기
        function showAllQuestions() {
            modalOverlay.classList.remove('hidden');
        }

        // [NEW] 전체 질문 모달 숨기기
        function hideAllQuestions() {
            modalOverlay.classList.add('hidden');
        }

        // [NEW] 목록에서 질문 선택
        function selectQuestion(index) {
            currentQuestionIndex = index;
            renderQuestion();
            hideAllQuestions();
        }

        // 앱 초기화
        document.addEventListener('DOMContentLoaded', () => {
            // [NEW] 전체 질문 목록 채우기
            allQuestionsList.innerHTML = questions.map((q, index) => {
                return `
                    <li>
                        <a href="#" class="block p-4 rounded-lg hover:bg-indigo-50 transition-colors duration-150 text-gray-700 font-medium" 
                           onclick="event.preventDefault(); selectQuestion(${index})">
                            ${q.question}
                        </a>
                    </li>
                `;
            }).join('');
            
            // 첫 번째 질문 렌더링
            renderQuestion();
        });
    </script>
</body>
</html>
