<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>듣기 스크립트 - 빈칸 채우기 (듣기 2)</title>
    <!-- Tailwind CSS 로드 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter 폰트 로드 (Noto Sans KR 포함) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* 기본 폰트 설정 */
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
        }

        /* 빈칸 스타일 */
        .blank {
            background-color: #fef9c3; /* yellow-100 */
            color: #713f12; /* yellow-900 */
            border: 1px solid #fde047; /* yellow-400 */
            padding: 2px 8px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 700;
            transition: background-color 0.2s;
        }
        .blank:hover {
            background-color: #fef08a; /* yellow-200 */
        }

        /* 정답 맞춘 후 스타일 */
        .correct {
            background-color: #dcfce7; /* green-100 */
            color: #14532d; /* green-900 */
            border: 1px solid #86efac; /* green-300 */
            padding: 2px 8px;
            border-radius: 6px;
            font-weight: 500;
        }

        /* 오답 선택 시 임시 스타일 (JS로 제어) */
        .wrong-flash {
            animation: flash-red 0.5s;
        }
        @keyframes flash-red {
            0%, 100% { background-color: #fef9c3; border-color: #fde047; } /* yellow-100, yellow-400 */
            50% { background-color: #fee2e2; border-color: #fca5a5; } /* red-100, red-300 */
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">

    <!-- 옵션 선택 컨테이너 (상단 고정) -->
    <div id="options-container" class="sticky top-0 z-10 bg-white shadow-lg p-6 rounded-b-xl transition-all hidden">
        <h2 id="question-title" class="text-lg font-semibold text-gray-800 mb-4 text-center">"..."의 빈칸에 알맞은 말은?</h2>
        <div class="flex flex-col sm:flex-row justify-center sm:space-x-4 space-y-2 sm:space-y-0">
            <button class="option-btn bg-blue-500 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-600 transition-all transform hover:scale-105"></button>
            <button class="option-btn bg-blue-500 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-600 transition-all transform hover:scale-105"></button>
            <button class="option-btn bg-blue-500 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-600 transition-all transform hover:scale-105"></button>
        </div>
    </div>

    <!-- 메인 컨텐츠 (스크립트) -->
    <div class="max-w-3xl mx-auto p-4 sm:p-8">
        <div class="bg-white shadow-2xl rounded-xl overflow-hidden">
            <div class="p-6 sm:p-10">
                <div class="flex justify-between items-center mb-6 pb-4 border-b">
                    <h1 class="text-3xl font-bold text-gray-900">듣기 2</h1>
                    <span class="text-sm font-medium text-gray-500">track 53 / p.131</span>
                </div>

                <!-- 스크립트 내용 -->
                <div id="script-container" class="space-y-5 text-lg leading-relaxed">
                    <p>
                        <strong class="text-blue-600">리포터:</strong>
                        여러분, 안녕하세요? 저는 지금 7~80년대 서울의 모습
                        <span class="blank" 
                              data-answer="전시회" 
                              data-option1="박물관" 
                              data-option2="행사장"
                              data-question="서울의 모습 [빈칸]에 나와 있습니다.">
                              [빈칸]
                        </span>
                        에 나와 있습니다. 어린이날을 맞이해서 아이들과 함께 온 가족들이 많이 보이는데요. 잠시 이야기를 나눠 보겠습니다. 오늘 전시회에 와 보니까 어때요?
                    </p>
                    <p>
                        <strong class="text-pink-600">아이:</strong>
                        부모님이 어렸을 때 살았던 동네를 사진으로 보니까 기분이
                        <span class="blank" 
                              data-answer="이상해요." 
                              data-option1="재미있어요." 
                              data-option2="신기해요."
                              data-question="기분이 [빈칸]">
                              [빈칸]
                        </span>
                        보면 볼수록 신기하고요. 또 청계천의 옛날 모습이 지금하고 하도 많이 달라서 깜짝 놀랐어요. 청계천이 차가 다니던 도로였다는 게 상상이 안 돼요.
                    </p>
                    <p>
                        <strong class="text-blue-600">리포터:</strong>
                        그렇군요. 부모님들이 어렸을 때 했던 놀이를 아이들에게
                        <span class="blank" 
                              data-answer="가르쳐" 
                              data-option1="보여" 
                              data-option2="설명해"
                              data-question="아이들에게 [빈칸] 주는 곳도 있는데요.">
                              [빈칸]
                        </span>
                        주는 곳도 있는데요. 한번 가 보겠습니다. 아버님, 열심히 팽이치기를 하고 계신데요. 오늘 전시회가 어떠셨어요?
                    </p>
                    <p>
                        <strong class="text-green-600">아버지:</strong>
                        우리가 어렸을 때 자주 하고 놀았던 놀이를 아이들하고 같이 해 볼 수 있어서 정말
                        <span class="blank" 
                              data-answer="좋았어요." 
                              data-option1="특별했어요." 
                              data-option2="즐거웠어요."
                              data-question="정말 [빈칸]">
                              [빈칸]
                        </span>
                        그동안 잊고 있었던 추억들이 생각나서 다시 어렸을 때로 돌아간 것 같아요. 하도 재미있어서 시간 가는 줄 몰랐어요.
                    </p>
                    <p>
                        <strong class="text-blue-600">리포터:</strong>
                        네, 감사합니다. 이번 전시는 5월 한 달 동안
                        <span class="blank" 
                              data-answer="계속된다고" 
                              data-option1="진행된다고" 
                              data-option2="열린다고"
                              data-question="5월 한 달 동안 [빈칸] 하니까...">
                              [빈칸]
                        </span>
                        하니까 가족들과 특별한 추억을 만들고 싶으신 분들은 꼭 오셔서 관람하시기 바랍니다. 지금까지 리포터 김현정이었습니다.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const optionsContainer = document.getElementById('options-container');
            const questionTitle = document.getElementById('question-title');
            const optionButtons = document.querySelectorAll('.option-btn');
            const blanks = document.querySelectorAll('.blank');
            
            let activeBlank = null;

            // 배열 섞기 헬퍼 함수
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            // 빈칸 클릭 시 옵션 표시
            function showOptions(blankEl) {
                // 이미 정답을 맞춘 빈칸은 무시
                if (blankEl.classList.contains('correct')) return;

                activeBlank = blankEl;
                
                const answer = activeBlank.dataset.answer;
                const option1 = activeBlank.dataset.option1;
                const option2 = activeBlank.dataset.option2;
                const question = activeBlank.dataset.question;

                questionTitle.textContent = `"${question}"의 빈칸에 알맞은 말은?`;

                const options = shuffleArray([answer, option1, option2]);

                optionButtons.forEach((button, index) => {
                    button.textContent = options[index];
                    button.dataset.isCorrect = (options[index] === answer);
                });

                optionsContainer.classList.remove('hidden');
                // 옵션 컨테이너로 스크롤
                optionsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }

            // 옵션 버튼 클릭 시 정답 확인
            function checkAnswer(buttonEl) {
                if (!activeBlank) return;

                const isCorrect = buttonEl.dataset.isCorrect === 'true';

                if (isCorrect) {
                    // 정답 처리
                    activeBlank.textContent = activeBlank.dataset.answer;
                    activeBlank.classList.remove('blank');
                    activeBlank.classList.add('correct');
                    // 더 이상 클릭되지 않도록 이벤트 리스너 제거
                    activeBlank.style.pointerEvents = 'none';
                } else {
                    // 오답 처리 (빨간색으로 반짝임)
                    activeBlank.classList.add('wrong-flash');
                    setTimeout(() => {
                        activeBlank.classList.remove('wrong-flash');
                    }, 500);
                }

                // 옵션 컨테이너 숨기기
                optionsContainer.classList.add('hidden');
                activeBlank = null;
            }

            // 모든 빈칸에 클릭 이벤트 리스너 추가
            blanks.forEach(blank => {
                blank.addEventListener('click', () => showOptions(blank));
            });

            // 모든 옵션 버튼에 클릭 이벤트 리스너 추가
            optionButtons.forEach(button => {
                button.addEventListener('click', () => checkAnswer(button));
            });
        });
    </script>

</body>
</html>
